module.exports=[2490,a=>{"use strict";var b=a.i(21652),c=a.i(34680);a.s(["instructoresService",0,{async getAll(a){let{data:d}=await b.apiClient.get(c.API_ENDPOINTS.instructores,a);if(d&&"object"==typeof d&&"success"in d&&d.data){let a=d.data;return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}return Array.isArray(d)?{data:d,total:d.length,current_page:1,last_page:1,per_page:d.length,from:1,to:d.length}:d},async getDisponibles(){let{data:a}=await b.apiClient.get(`${c.API_ENDPOINTS.instructores}/disponibles/listar`);return a&&"object"==typeof a&&"instructores"in a?a.instructores.map(a=>({id_usuario:a.id_usuario||a.id_instructor||0,nombre:a.nombres||a.nombre||"",apellido:a.apellidos||a.apellido||"",email:a.email||"",especialidad:a.especialidad,status:"activo",id_rol:0,created_at:"",updated_at:""})):a&&"object"==typeof a&&"data"in a?a.data:a}},"rolesService",0,{async getAll(){console.log("Llamando a:",c.API_ENDPOINTS.roles);let{data:a}=await b.apiClient.get(c.API_ENDPOINTS.roles);return console.log("Respuesta roles:",a),Array.isArray(a)?a:a.data},async getById(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.roles}/${a}`);return d},async create(a){let{data:d}=await b.apiClient.post(c.API_ENDPOINTS.roles,a);return d.data},async update(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.roles}/${a}`,d);return e.data},async delete(a){await b.apiClient.delete(`${c.API_ENDPOINTS.roles}/${a}`)}},"usuariosService",0,{async getAll(a){let{data:d}=await b.apiClient.get(c.API_ENDPOINTS.usuarios,a);if(d&&"object"==typeof d&&"success"in d&&d.data){let a=d.data;return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}return Array.isArray(d)?{data:d,total:d.length,current_page:1,last_page:1,per_page:d.length,from:1,to:d.length}:d},async getById(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.usuarios}/${a}`);return d},async create(a){let{data:d}=await b.apiClient.post(c.API_ENDPOINTS.usuarios,a);return d},async update(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.usuarios}/${a}`,d);return e},async delete(a){await b.apiClient.delete(`${c.API_ENDPOINTS.usuarios}/${a}`)},async cambiarEstado(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.usuarios}/${a}/estado`,{status:d});return e}}])},81415,a=>{"use strict";var b=a.i(57692),c=a.i(98620),d=a.i(28632);a.i(67360);var e=a.i(4656);a.i(95994);var f=a.i(36119),g=a.i(77314),h=a.i(76182),i=a.i(2133),j=a.i(2490);function k(){let a=(0,d.useRouter)(),k=Number((0,d.useParams)().id),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)({nombre:"",apellido:"",email:"",cedula:"",telefono:"",direccion:"",id_rol:"",estado:"activo"});(0,c.useEffect)(()=>{(async()=>{try{let[a,b]=await Promise.all([j.usuariosService.getById(k),j.rolesService.getAll()]);s(b),u({nombre:a.nombre||"",apellido:a.apellido||"",email:a.email||"",cedula:a.cedula||"",telefono:a.telefono||"",direccion:a.direccion||"",id_rol:a.id_rol?String(a.id_rol):"",estado:a.status||"activo"})}catch(a){q("Error al cargar el usuario"),console.error(a)}finally{o(!1)}})()},[k]);let v=a=>{let{name:b,value:c}=a.target;u(a=>({...a,[b]:c}))},w=async b=>{b.preventDefault(),m(!0),q("");try{await j.usuariosService.update(k,{nombre:t.nombre,apellido:t.apellido,email:t.email,cedula:t.cedula||void 0,telefono:t.telefono||void 0,direccion:t.direccion||void 0,id_rol:t.id_rol?parseInt(t.id_rol):void 0,status:t.estado}),a.push("/sistema/usuarios")}catch(a){q(a instanceof Error?a.message:"Error al actualizar")}finally{m(!1)}};return n?(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsx)("div",{className:"flex justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Editar Usuario"})}),(0,b.jsxs)(f.CardContent,{children:[p&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:p}),(0,b.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(h.Input,{label:"Nombre",name:"nombre",value:t.nombre,onChange:v,required:!0}),(0,b.jsx)(h.Input,{label:"Apellido",name:"apellido",value:t.apellido,onChange:v,required:!0})]}),(0,b.jsx)(h.Input,{label:"Email",name:"email",type:"email",value:t.email,onChange:v,required:!0}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(h.Input,{label:"Cédula",name:"cedula",value:t.cedula,onChange:v}),(0,b.jsx)(h.Input,{label:"Teléfono",name:"telefono",value:t.telefono,onChange:v})]}),(0,b.jsx)(h.Input,{label:"Dirección",name:"direccion",value:t.direccion,onChange:v}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(i.Select,{label:"Rol",name:"id_rol",value:t.id_rol,onChange:v,placeholder:"Seleccionar rol",options:r.map(a=>({value:a.id_rol,label:a.nombre}))}),(0,b.jsx)(i.Select,{label:"Estado",name:"estado",value:t.estado,onChange:v,options:[{value:"activo",label:"Activo"},{value:"inactivo",label:"Inactivo"},{value:"suspendido",label:"Suspendido"}]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)(g.Button,{type:"button",variant:"secondary",onClick:()=>a.back(),children:"Cancelar"}),(0,b.jsx)(g.Button,{type:"submit",disabled:l,children:l?"Guardando...":"Guardar Cambios"})]})]})]})]})})})}a.s(["default",()=>k])}];

//# sourceMappingURL=Documents_GitHub_proyecto-web2-frontend_src_becbf5fd._.js.map