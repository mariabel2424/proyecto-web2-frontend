module.exports=[29518,a=>{"use strict";var b=a.i(21652),c=a.i(34680);a.s(["facturasService",0,{async getAll(a){let{data:d}=await b.apiClient.get(c.API_ENDPOINTS.facturas,a);if(d&&"object"==typeof d&&"success"in d&&d.data){let a=d.data;return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}return Array.isArray(d)?{data:d,total:d.length,current_page:1,last_page:1,per_page:d.length,from:1,to:d.length}:d},async getById(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.facturas}/${a}`);return d},async create(a){let{data:d}=await b.apiClient.post(c.API_ENDPOINTS.facturas,a);return d},async update(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.facturas}/${a}`,d);return e},async delete(a){await b.apiClient.delete(`${c.API_ENDPOINTS.facturas}/${a}`)},async cambiarEstado(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.facturas}/${a}`,{estado:d});return e},async registrarPago(a,d){let{data:e}=await b.apiClient.post(`${c.API_ENDPOINTS.facturas}/${a}/registrar-pago`,d);return e},async generarDesdeInscripcion(a,d){let{data:e}=await b.apiClient.post(`${c.API_ENDPOINTS.facturas}/generar-desde-inscripcion/${a}`,{id_tutor:d});return e},async getFacturasPorTutor(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.facturas}/tutor/${a}`);return d},async getReporteFacturacion(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.facturas}/reporte/facturacion`,a);return d},async getDatosParaPdf(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.facturas}/${a}/pdf`);return d}},"pagosService",0,{async getAll(a){let{data:d}=await b.apiClient.get(c.API_ENDPOINTS.pagos,a);if(d&&"object"==typeof d&&"success"in d&&d.data){let a=d.data;return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}return Array.isArray(d)?{data:d,total:d.length,current_page:1,last_page:1,per_page:d.length,from:1,to:d.length}:d},async getById(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.pagos}/${a}`);return d},async update(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.pagos}/${a}`,d);return e},async delete(a){await b.apiClient.delete(`${c.API_ENDPOINTS.pagos}/${a}`)},async verificar(a){let{data:d}=await b.apiClient.post(`${c.API_ENDPOINTS.pagos}/${a}/verificar`);return d},async rechazar(a,d){let{data:e}=await b.apiClient.post(`${c.API_ENDPOINTS.pagos}/${a}/rechazar`,{motivo:d});return e}}])},5104,a=>{"use strict";var b=a.i(57692),c=a.i(98620),d=a.i(28632);a.i(67360);var e=a.i(4656);a.i(95994);var f=a.i(36119),g=a.i(77314),h=a.i(76182),i=a.i(2133),j=a.i(29518);function k(){let a=(0,d.useRouter)(),k=Number((0,d.useParams)().id),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)({monto:"",metodo_pago:"efectivo",referencia:"",observaciones:""});(0,c.useEffect)(()=>{(async()=>{try{let a=await j.facturasService.getById(k);s(a),u(b=>({...b,monto:String(a.total)}))}catch(a){q("Error al cargar la factura"),console.error(a)}finally{o(!1)}})()},[k]);let v=a=>{let{name:b,value:c}=a.target;u(a=>({...a,[b]:c}))},w=async b=>{b.preventDefault(),m(!0),q("");try{await j.facturasService.registrarPago(k,{monto:parseFloat(t.monto),metodo_pago:t.metodo_pago,referencia:t.referencia||void 0,observaciones:t.observaciones||void 0,fecha_pago:new Date().toISOString().split("T")[0]}),a.push("/finanzas/facturas")}catch(a){q(a instanceof Error?a.message:"Error al registrar el pago")}finally{m(!1)}};return n?(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsx)("div",{className:"flex justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsx)("div",{className:"max-w-lg mx-auto",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Registrar Pago"})}),(0,b.jsxs)(f.CardContent,{children:[r&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Factura: ",r.numero_factura]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Concepto: ",r.concepto]}),(0,b.jsxs)("p",{className:"text-lg font-bold mt-2",children:["Total a pagar: $",r.total.toFixed(2)]})]}),p&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:p}),(0,b.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,b.jsx)(h.Input,{label:"Monto ($)",name:"monto",type:"number",step:"0.01",value:t.monto,onChange:v,required:!0}),(0,b.jsx)(i.Select,{label:"Método de Pago",name:"metodo_pago",value:t.metodo_pago,onChange:v,options:[{value:"efectivo",label:"Efectivo"},{value:"transferencia",label:"Transferencia"},{value:"tarjeta",label:"Tarjeta"},{value:"otro",label:"Otro"}]}),(0,b.jsx)(h.Input,{label:"Referencia / Comprobante",name:"referencia",value:t.referencia,onChange:v,placeholder:"Número de transacción, etc."}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),(0,b.jsx)("textarea",{name:"observaciones",value:t.observaciones,onChange:v,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)(g.Button,{type:"button",variant:"secondary",onClick:()=>a.back(),children:"Cancelar"}),(0,b.jsx)(g.Button,{type:"submit",disabled:l,children:l?"Procesando...":"Registrar Pago"})]})]})]})]})})})}a.s(["default",()=>k])}];

//# sourceMappingURL=Documents_GitHub_proyecto-web2-frontend_src_a263b251._.js.map