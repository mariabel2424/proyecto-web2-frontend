module.exports=[33093,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});a.s(["CheckCircleIcon",0,c],33093)},21248,a=>{"use strict";var b=a.i(21652),c=a.i(34680);a.s(["asistenciasService",0,{async getAsistencias(a,d){let{data:e}=await b.apiClient.get(`${c.API_ENDPOINTS.gruposCurso}/${a}/asistencias`,d?{fecha:d}:{});return e},async registrarAsistencias(a,d,e){let{data:f}=await b.apiClient.post(`${c.API_ENDPOINTS.gruposCurso}/${a}/asistencias`,{fecha:d,asistencias:e});return f},async getHistorial(a,d,e){let f={};d&&(f.fecha_inicio=d),e&&(f.fecha_fin=e);let{data:g}=await b.apiClient.get(`${c.API_ENDPOINTS.gruposCurso}/${a}/asistencias/historial`,f);return g},async getReporte(a,d){let{data:e}=await b.apiClient.get(`${c.API_ENDPOINTS.gruposCurso}/${a}/asistencias/reporte`,{fecha:d});return e}},"cursosService",0,{async getAll(a){let{data:d}=await b.apiClient.get(c.API_ENDPOINTS.cursos,a);if(d&&"object"==typeof d&&"success"in d&&d.data){let a=d.data;return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}return d&&"object"==typeof d&&"current_page"in d&&"data"in d?{data:Array.isArray(d.data)?d.data:[],total:d.total||0,current_page:d.current_page||1,last_page:d.last_page||1,per_page:d.per_page||15,from:d.from||0,to:d.to||0}:Array.isArray(d)?{data:d,total:d.length,current_page:1,last_page:1,per_page:d.length,from:1,to:d.length}:{data:[],total:0,current_page:1,last_page:1,per_page:15,from:0,to:0}},async getById(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.cursos}/${a}`);return d},async create(a){let{data:d}=await b.apiClient.post(c.API_ENDPOINTS.cursos,a);return d},async update(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.cursos}/${a}`,d);return e},async delete(a){await b.apiClient.delete(`${c.API_ENDPOINTS.cursos}/${a}`)},async getCursosAbiertos(){let{data:a}=await b.apiClient.get(c.API_ENDPOINTS.cursosAbiertos);return a},async getParticipantes(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.cursos}/${a}/participantes`);return d},async getGruposDisponibles(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.cursos}/${a}/grupos-disponibles`);return d},async getGruposPublico(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.cursos}/${a}/grupos-publico`);return d}},"gruposCursoService",0,{async getAll(a){let{data:d}=await b.apiClient.get(c.API_ENDPOINTS.gruposCurso,a);if(d&&"object"==typeof d&&"success"in d&&d.data){let a=d.data;return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}return Array.isArray(d)?{data:d,total:d.length,current_page:1,last_page:1,per_page:d.length,from:1,to:d.length}:d},async getById(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.gruposCurso}/${a}`);return d},async create(a){let{data:d}=await b.apiClient.post(c.API_ENDPOINTS.gruposCurso,a);return d},async update(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.gruposCurso}/${a}`,d);return e},async delete(a){await b.apiClient.delete(`${c.API_ENDPOINTS.gruposCurso}/${a}`)},async getDeportistas(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.gruposCurso}/${a}/deportistas`);return d},async asignarInstructor(a,d){let{data:e}=await b.apiClient.post(`${c.API_ENDPOINTS.gruposCurso}/${a}/asignar-instructor`,{id_instructor:d});return e},async quitarInstructor(a,d){let{data:e}=await b.apiClient.post(`${c.API_ENDPOINTS.gruposCurso}/${a}/quitar-instructor`,{id_instructor:d});return e},async getInstructores(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.gruposCurso}/${a}/instructores`);return d},async cambiarEstado(a,d){let{data:e}=await b.apiClient.patch(`${c.API_ENDPOINTS.gruposCurso}/${a}/cambiar-estado`,{estado:d});return e}},"inscripcionesService",0,{async getAll(a){let{data:d}=await b.apiClient.get(c.API_ENDPOINTS.inscripcionesCurso,a);if(d&&"object"==typeof d&&"success"in d&&d.data){let a=d.data;return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}return Array.isArray(d)?{data:d,total:d.length,current_page:1,last_page:1,per_page:d.length,from:1,to:d.length}:d},async getById(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.inscripcionesCurso}/${a}`);return d},async create(a){let{data:d}=await b.apiClient.post(c.API_ENDPOINTS.inscripcionesCurso,a);return d},async update(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.inscripcionesCurso}/${a}`,d);return e},async delete(a){await b.apiClient.delete(`${c.API_ENDPOINTS.inscripcionesCurso}/${a}`)},async calificar(a,d,e){let{data:f}=await b.apiClient.post(`${c.API_ENDPOINTS.inscripcionesCurso}/${a}/calificar`,{calificacion:d,comentarios:e});return f},async cancelar(a,d){let{data:e}=await b.apiClient.patch(`${c.API_ENDPOINTS.inscripcionesCurso}/${a}/cancelar`,{motivo:d});return e},async generarFactura(a,d){let{data:e}=await b.apiClient.post(`${c.API_ENDPOINTS.inscripcionesCurso}/${a}/generar-factura`,{id_tutor:d});return e},async getMisInscripciones(a){let{data:c}=await b.apiClient.get("/mis-inscripciones",a);return Array.isArray(c)?{data:c,total:c.length,current_page:1,last_page:1,per_page:c.length,from:1,to:c.length}:c}}])},27280,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});a.s(["ClockIcon",0,c],27280)},26667,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});a.s(["ArrowLeftIcon",0,c],26667)},18364,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});a.s(["XCircleIcon",0,c],18364)},43978,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))});a.s(["CalendarIcon",0,c],43978)},89880,a=>{"use strict";var b=a.i(57692),c=a.i(98620),d=a.i(28632);a.i(67360);var e=a.i(4656);a.i(95994);var f=a.i(77314),g=a.i(63953),h=a.i(21248),i=a.i(26667),j=a.i(42417);a.i(33093),a.i(18364),a.i(27280);let k=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});var l=a.i(43978);function m(){let a=(0,d.useParams)(),m=(0,d.useRouter)(),n=Number(a.id),[o,p]=(0,c.useState)(()=>{let a=new Date,b=a.getTimezoneOffset();return new Date(a.getTime()+(b+-300)*6e4).toISOString().split("T")[0]}),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)({}),[y,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)({presentes:0,ausentes:0,total:0}),I=async a=>{z(!0);try{let b=await h.asistenciasService.getAsistencias(n,a);r(b.grupo),t(b.fecha_formato||"");let c=b.estudiantes||[];v(c),H({presentes:b.presentes||0,ausentes:b.ausentes||0,total:b.total_estudiantes||c.length});let d={};c.forEach(a=>{d[a.id_deportista]={id_inscripcion:a.id_inscripcion,id_deportista:a.id_deportista,estado:a.asistencia?.estado||"presente",observaciones:a.asistencia?.observaciones||""}}),x(d)}catch(a){console.error("Error cargando asistencias:",a),F({tipo:"error",texto:"Error al cargar las asistencias"})}finally{z(!1)}};(0,c.useEffect)(()=>{n&&I(o)},[n,o]);let J=a=>{x(b=>{let c={...b};return Object.keys(c).forEach(b=>{c[Number(b)]={...c[Number(b)],estado:a}}),c})},K=async()=>{B(!0),F(null);try{let a=Object.values(w),b=await h.asistenciasService.registrarAsistencias(n,o,a);F({tipo:"success",texto:b.message}),I(o)}catch(a){console.error("Error guardando asistencias:",a),F({tipo:"error",texto:"Error al guardar las asistencias"})}finally{B(!1)}},L=async()=>{D(!0);try{let a=await h.asistenciasService.getReporte(n,o);M(a)}catch(a){console.error("Error descargando reporte:",a),F({tipo:"error",texto:"Error al generar el reporte"})}finally{D(!1)}},M=a=>{let b=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Reporte de Asistencia - ${a.grupo}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 20px; }
          h1 { text-align: center; color: #333; font-size: 18px; }
          .info { margin-bottom: 20px; }
          .info p { margin: 5px 0; font-size: 12px; }
          .resumen { display: flex; gap: 20px; margin-bottom: 20px; }
          .resumen-item { padding: 10px; background: #f5f5f5; border-radius: 5px; text-align: center; }
          table { width: 100%; border-collapse: collapse; font-size: 11px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background: #f0f0f0; }
          .presente { color: green; }
          .ausente { color: red; }
          .footer { margin-top: 20px; font-size: 10px; color: #666; text-align: center; }
        </style>
      </head>
      <body>
        <h1>${a.titulo}</h1>
        <div class="info">
          <p><strong>Grupo:</strong> ${a.grupo}</p>
          <p><strong>Curso:</strong> ${a.curso}</p>
          <p><strong>Instructor:</strong> ${a.instructor}</p>
          <p><strong>Fecha:</strong> ${a.fecha}</p>
          <p><strong>Horario:</strong> ${a.horario}</p>
        </div>
        <div class="resumen">
          <div class="resumen-item"><strong>Total:</strong> ${a.resumen.total_estudiantes}</div>
          <div class="resumen-item"><strong>Presentes:</strong> ${a.resumen.presentes}</div>
          <div class="resumen-item"><strong>Ausentes:</strong> ${a.resumen.ausentes}</div>
          <div class="resumen-item"><strong>Tardanzas:</strong> ${a.resumen.tardanzas}</div>
        </div>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Nombre</th>
              <th>C\xe9dula</th>
              <th>Estado</th>
              <th>Observaciones</th>
            </tr>
          </thead>
          <tbody>
            ${a.estudiantes.map((a,b)=>`
              <tr>
                <td>${b+1}</td>
                <td>${a.nombre}</td>
                <td>${a.cedula}</td>
                <td class="${"presente"===a.estado.toLowerCase()?"presente":"ausente"===a.estado.toLowerCase()?"ausente":""}">${a.estado}</td>
                <td>${a.observaciones||"-"}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        <div class="footer">
          <p>Generado el ${a.generado_en} por ${a.generado_por}</p>
        </div>
      </body>
      </html>
    `,c=window.open("","_blank");c&&(c.document.write(b),c.document.close(),c.print())};return y?(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,b.jsx)(g.Spinner,{size:"lg"})})}):(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>m.push(`/mis-grupos/${n}`),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(i.ArrowLeftIcon,{className:"h-5 w-5 text-gray-500"})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-green-50 rounded-lg",children:(0,b.jsx)(j.ClipboardDocumentListIcon,{className:"h-5 w-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Registro de Asistencia"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[q?.nombre," • ",q?.curso]})]})]})})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(l.CalendarIcon,{className:"h-5 w-5 text-gray-400"}),(0,b.jsx)("input",{type:"date",value:o,onChange:a=>p(a.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:s})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"secondary",size:"sm",onClick:()=>J("presente"),children:"Todos Presentes"}),(0,b.jsx)(f.Button,{variant:"secondary",size:"sm",onClick:()=>J("ausente"),children:"Todos Ausentes"})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:G.total}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Total Estudiantes"})]}),(0,b.jsxs)("div",{className:"bg-emerald-50 rounded-xl border border-emerald-100 p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:Object.values(w).filter(a=>"presente"===a.estado).length}),(0,b.jsx)("p",{className:"text-xs text-emerald-600",children:"Presentes"})]}),(0,b.jsxs)("div",{className:"bg-red-50 rounded-xl border border-red-100 p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600",children:Object.values(w).filter(a=>"ausente"===a.estado).length}),(0,b.jsx)("p",{className:"text-xs text-red-600",children:"Ausentes"})]})]}),E&&(0,b.jsx)("div",{className:`p-4 rounded-lg ${"success"===E.tipo?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-700"}`,children:E.texto}),(0,b.jsx)("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 border-b border-gray-100",children:[(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"#"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Estudiante"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Cédula"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Estado"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Observaciones"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-50",children:u.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:c+1}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,b.jsxs)("span",{className:"text-xs font-medium text-green-600",children:[a.deportista.nombres.charAt(0),a.deportista.apellidos.charAt(0)]})}),(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[a.deportista.nombres," ",a.deportista.apellidos]})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:a.deportista.cedula||"-"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("div",{className:"flex items-center justify-center gap-1",children:["presente","ausente","tardanza","justificado"].map(c=>(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id_deportista,void x(a=>({...a,[b]:{...a[b],estado:c}}))},className:`px-2 py-1 text-xs rounded-lg border transition-colors ${w[a.id_deportista]?.estado===c?"presente"===c?"bg-emerald-100 border-emerald-300 text-emerald-700":"ausente"===c?"bg-red-100 border-red-300 text-red-700":"tardanza"===c?"bg-amber-100 border-amber-300 text-amber-700":"bg-blue-100 border-blue-300 text-blue-700":"border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:"presente"===c?"P":"ausente"===c?"A":"tardanza"===c?"T":"J"},c))})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("input",{type:"text",value:w[a.id_deportista]?.observaciones||"",onChange:b=>{var c,d;return c=a.id_deportista,d=b.target.value,void x(a=>({...a,[c]:{...a[c],observaciones:d}}))},placeholder:"Observaciones...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-green-500"})})]},a.id_deportista))})]})})}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)(f.Button,{variant:"secondary",onClick:L,disabled:C,children:[(0,b.jsx)(k,{className:"h-4 w-4 mr-2"}),C?"Generando...":"Descargar Reporte"]}),(0,b.jsx)(f.Button,{onClick:K,disabled:A,children:A?"Guardando...":"Guardar Asistencia"})]})]})})}a.s(["default",()=>m],89880)}];

//# sourceMappingURL=Documents_GitHub_proyecto-web2-frontend_3d12bccf._.js.map