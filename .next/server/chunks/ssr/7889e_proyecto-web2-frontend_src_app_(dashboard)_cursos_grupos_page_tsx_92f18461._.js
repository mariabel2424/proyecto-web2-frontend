module.exports=[25222,a=>{"use strict";var b=a.i(57692),c=a.i(98620),d=a.i(28632);a.i(67360);var e=a.i(4656);a.i(95994);var f=a.i(77314),g=a.i(91419),h=a.i(60364),i=a.i(62664),j=a.i(72328),k=a.i(86166),l=a.i(21248),m=a.i(2490),n=a.i(65513),o=a.i(29869),p=a.i(60407),q=a.i(74891),r=a.i(82886),s=a.i(77573),t=a.i(27280),u=a.i(86993);let v=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))});var w=a.i(65857);let x=[{value:"1",label:"Lunes"},{value:"2",label:"Martes"},{value:"3",label:"Miércoles"},{value:"4",label:"Jueves"},{value:"5",label:"Viernes"},{value:"6",label:"Sábado"},{value:"7",label:"Domingo"}];function y(){let a=(0,d.useRouter)(),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)(""),[Y,Z]=(0,c.useState)({nombre:"",id_curso:"",cupo_maximo:"",hora_inicio:"",hora_fin:"",dias_semana:[],estado:"activo",id_instructor:""});(0,c.useEffect)(()=>{Promise.all([l.cursosService.getAll({per_page:100}),m.instructoresService.getDisponibles()]).then(([a,b])=>{z(a.data),B(b)}).catch(console.error)},[]);let $=(0,c.useCallback)(a=>l.gruposCursoService.getAll(a),[]),{data:_,isLoading:aa,page:ab,perPage:ac,total:ad,lastPage:ae,search:af,sortBy:ag,sortOrder:ah,goToPage:ai,changePerPage:aj,handleSearch:ak,handleSort:al,refetch:am}=(0,k.usePagination)($),an=async a=>{a.preventDefault(),T(!0);try{let a={nombre:Y.nombre,id_curso:Number(Y.id_curso),cupo_maximo:Number(Y.cupo_maximo),hora_inicio:Y.hora_inicio,hora_fin:Y.hora_fin,dias_semana:Y.dias_semana,estado:Y.estado,id_instructor:Y.id_instructor?Number(Y.id_instructor):void 0};K?await l.gruposCursoService.update(K.id_grupo,a):await l.gruposCursoService.create(a),D(!1),aq(),am()}catch(a){console.error("Error guardando grupo:",a)}finally{T(!1)}},ao=async()=>{if(O){R(!0);try{await l.gruposCursoService.delete(O),am()}catch(a){console.error("Error:",a)}finally{R(!1),H(!1),P(null)}}},ap=async()=>{if(M){V(!0);try{W?await l.gruposCursoService.asignarInstructor(M.id_grupo,Number(W)):M.id_instructor&&await l.gruposCursoService.quitarInstructor(M.id_grupo,M.id_instructor),J(!1),am()}catch(a){console.error("Error asignando instructor:",a)}finally{V(!1)}}},aq=()=>{L(null),Z({nombre:"",id_curso:"",cupo_maximo:"",hora_inicio:"",hora_fin:"",dias_semana:[],estado:"activo",id_instructor:""})},ar=a=>{switch(a){case"activo":return"bg-emerald-50 text-emerald-600";case"completo":return"bg-blue-50 text-blue-600";case"inactivo":default:return"bg-gray-100 text-gray-500";case"cancelado":return"bg-red-50 text-red-600"}},as=[{key:"nombre",header:"Grupo",sortable:!0,render:a=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-7 h-7 bg-purple-50 rounded-lg flex items-center justify-center",children:(0,b.jsx)(r.UserGroupIcon,{className:"h-3.5 w-3.5 text-purple-600"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.nombre})]})},{key:"curso",header:"Curso",render:a=>(0,b.jsx)("span",{className:"text-sm text-gray-600",children:a.curso?.nombre||"-"})},{key:"instructor",header:"Instructor",render:a=>(0,b.jsx)("div",{className:"flex items-center gap-2",children:a.instructor?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-green-50 rounded-full flex items-center justify-center",children:(0,b.jsxs)("span",{className:"text-xs font-medium text-green-600",children:[a.instructor.nombre?.charAt(0),a.instructor.apellido?.charAt(0)]})}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:[a.instructor.nombre," ",a.instructor.apellido]})]}):(0,b.jsx)("span",{className:"text-sm text-gray-400 italic",children:"Sin asignar"})})},{key:"horario",header:"Horario",render:a=>(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(t.ClockIcon,{className:"h-3.5 w-3.5 text-gray-400"}),(0,b.jsxs)("span",{children:[a.hora_inicio," - ",a.hora_fin]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:a.dias_semana_nombres||"-"})]})},{key:"cupo",header:"Cupo",render:a=>(0,b.jsx)("div",{className:"text-sm",children:(0,b.jsxs)("span",{className:"font-medium text-gray-900",children:[a.cupo_actual||0," / ",a.cupo_maximo]})})},{key:"estado",header:"Estado",render:a=>(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${ar(a.estado)}`,children:a.estado})},{key:"acciones",header:"",render:c=>(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,b.jsx)("button",{onClick:()=>a.push(`/cursos/grupos/${c.id_grupo}`),title:"Ver participantes e instructor",className:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",children:(0,b.jsx)(w.UsersIcon,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>{N(c),F(!0)},title:"Ver detalle",className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(s.EyeIcon,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>{N(c),X(c.id_instructor?.toString()||""),J(!0)},title:"Asignar instructor",className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:(0,b.jsx)(v,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>{L(c),Z({nombre:c.nombre,id_curso:c.id_curso?.toString()||"",cupo_maximo:c.cupo_maximo?.toString()||"",hora_inicio:c.hora_inicio||"",hora_fin:c.hora_fin||"",dias_semana:(c.dias_semana||[]).map(String),estado:c.estado||"activo",id_instructor:c.id_instructor?.toString()||""}),D(!0)},title:"Editar",className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,b.jsx)(p.PencilSquareIcon,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>{P(c.id_grupo),H(!0)},title:"Eliminar",className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,b.jsx)(q.TrashIcon,{className:"h-4 w-4"})})]})}];return(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-50 rounded-lg",children:(0,b.jsx)(r.UserGroupIcon,{className:"h-5 w-5 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Grupos de Curso"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[ad," registros"]})]})]}),(0,b.jsxs)(f.Button,{size:"sm",onClick:()=>{aq(),D(!0)},children:[(0,b.jsx)(n.PlusIcon,{className:"h-4 w-4 mr-1"}),"Nuevo Grupo"]})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl border border-gray-100 p-3",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(o.MagnifyingGlassIcon,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Buscar grupo...",value:af,onChange:a=>ak(a.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500"})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden",children:[(0,b.jsx)(g.Table,{columns:as,data:_,keyExtractor:a=>a.id_grupo,isLoading:aa,onSort:al,sortBy:ag,sortOrder:ah}),(0,b.jsx)("div",{className:"border-t border-gray-100",children:(0,b.jsx)(h.Pagination,{page:ab,lastPage:ae,total:ad,perPage:ac,onPageChange:ai,onPerPageChange:aj})})]}),(0,b.jsx)(i.Modal,{isOpen:E,onClose:()=>F(!1),title:"Detalle del Grupo",size:"md",children:M&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-100",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center text-purple-600",children:(0,b.jsx)(r.UserGroupIcon,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:M.nombre}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:M.curso?.nombre})]})]}),(0,b.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(u.AcademicCapIcon,{className:"h-4 w-4 text-green-600"}),(0,b.jsx)("span",{className:"text-xs font-medium text-green-600",children:"Instructor"})]}),M.instructor?(0,b.jsxs)("p",{className:"text-sm text-gray-900",children:[M.instructor.nombre," ",M.instructor.apellido,M.instructor.especialidad&&(0,b.jsxs)("span",{className:"text-gray-500 ml-1",children:["(",M.instructor.especialidad,")"]})]}):(0,b.jsx)("p",{className:"text-sm text-green-700 italic",children:"Sin instructor asignado"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Horario"}),(0,b.jsxs)("p",{className:"text-gray-900",children:[M.hora_inicio," - ",M.hora_fin]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Días"}),(0,b.jsx)("p",{className:"text-gray-900",children:M.dias_semana_nombres||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Cupo"}),(0,b.jsxs)("p",{className:"text-gray-900",children:[M.cupo_actual||0," /"," ",M.cupo_maximo]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Estado"}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${ar(M.estado)}`,children:M.estado})]})]})]})}),(0,b.jsx)(i.Modal,{isOpen:I,onClose:()=>J(!1),title:"Asignar Instructor",size:"sm",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Grupo"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:M?.nombre}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:M?.curso?.nombre})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Instructor"}),(0,b.jsxs)("select",{value:W,onChange:a=>X(a.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500",children:[(0,b.jsx)("option",{value:"",children:"Sin instructor"}),A.map(a=>(0,b.jsxs)("option",{value:a.id_usuario,children:[a.nombre," ",a.apellido,a.especialidad&&` - ${a.especialidad}`]},a.id_usuario))]})]}),M?.instructor&&!W&&(0,b.jsx)("div",{className:"p-3 bg-amber-50 rounded-lg",children:(0,b.jsxs)("p",{className:"text-xs text-amber-700",children:["Se quitará el instructor actual:"," ",M.instructor.nombre," ",M.instructor.apellido]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-3 border-t border-gray-100",children:[(0,b.jsx)(f.Button,{type:"button",variant:"secondary",size:"sm",onClick:()=>J(!1),children:"Cancelar"}),(0,b.jsx)(f.Button,{size:"sm",onClick:ap,disabled:U,children:U?"Guardando...":"Guardar"})]})]})}),(0,b.jsx)(i.Modal,{isOpen:C,onClose:()=>D(!1),title:`${K?"Editar":"Nuevo"} Grupo`,size:"md",children:(0,b.jsxs)("form",{onSubmit:an,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Nombre del Grupo *"}),(0,b.jsx)("input",{type:"text",value:Y.nombre,onChange:a=>Z({...Y,nombre:a.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Curso *"}),(0,b.jsxs)("select",{value:Y.id_curso,onChange:a=>Z({...Y,id_curso:a.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Seleccionar curso"}),y.map(a=>(0,b.jsx)("option",{value:a.id_curso,children:a.nombre},a.id_curso))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Instructor"}),(0,b.jsxs)("select",{value:Y.id_instructor,onChange:a=>Z({...Y,id_instructor:a.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",children:[(0,b.jsx)("option",{value:"",children:"Sin instructor"}),A.map(a=>(0,b.jsxs)("option",{value:a.id_usuario,children:[a.nombre," ",a.apellido,a.especialidad&&` - ${a.especialidad}`]},a.id_usuario))]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Hora Inicio *"}),(0,b.jsx)("input",{type:"time",value:Y.hora_inicio,onChange:a=>Z({...Y,hora_inicio:a.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Hora Fin *"}),(0,b.jsx)("input",{type:"time",value:Y.hora_fin,onChange:a=>Z({...Y,hora_fin:a.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Días de la Semana *"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.value,void Z(a=>({...a,dias_semana:a.dias_semana.includes(b)?a.dias_semana.filter(a=>a!==b):[...a.dias_semana,b]}))},className:`px-3 py-1.5 text-xs rounded-lg border transition-colors ${Y.dias_semana.includes(a.value)?"bg-purple-50 border-purple-200 text-purple-600":"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:a.label},a.value))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Cupo Máximo *"}),(0,b.jsx)("input",{type:"number",min:"1",value:Y.cupo_maximo,onChange:a=>Z({...Y,cupo_maximo:a.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Estado"}),(0,b.jsxs)("select",{value:Y.estado,onChange:a=>Z({...Y,estado:a.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",children:[(0,b.jsx)("option",{value:"activo",children:"Activo"}),(0,b.jsx)("option",{value:"inactivo",children:"Inactivo"}),(0,b.jsx)("option",{value:"completo",children:"Completo"}),(0,b.jsx)("option",{value:"cancelado",children:"Cancelado"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-3 border-t border-gray-100",children:[(0,b.jsx)(f.Button,{type:"button",variant:"secondary",size:"sm",onClick:()=>D(!1),children:"Cancelar"}),(0,b.jsx)(f.Button,{type:"submit",size:"sm",disabled:S,children:S?"Guardando...":K?"Actualizar":"Crear"})]})]})}),(0,b.jsx)(j.ConfirmModal,{isOpen:G,onClose:()=>H(!1),onConfirm:ao,title:"¿Eliminar grupo?",message:"Esta acción no se puede deshacer. El grupo será eliminado permanentemente.",isLoading:Q})]})})}a.s(["default",()=>y],25222)}];

//# sourceMappingURL=7889e_proyecto-web2-frontend_src_app_%28dashboard%29_cursos_grupos_page_tsx_92f18461._.js.map