{"version":3,"sources":["../../../../../../../Documents/GitHub/proyecto-web2-frontend/src/app/%28dashboard%29/inscribir/page.tsx","../../../../../../../Documents/GitHub/proyecto-web2-frontend/node_modules/%40heroicons/react/24/outline/esm/ArrowUpTrayIcon.js","../../../../../../../Documents/GitHub/proyecto-web2-frontend/src/lib/cloudinary.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback, Suspense } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { DashboardLayout } from '@/components/layout';\r\nimport {\r\n  Card,\r\n  Button,\r\n  Alert,\r\n  Spinner,\r\n  Select,\r\n  Pagination,\r\n} from '@/components/ui';\r\nimport { cursosService, inscripcionesService } from '@/services/cursos.service';\r\nimport { deportistasService } from '@/services/deportistas.service';\r\nimport {\r\n  AcademicCapIcon,\r\n  CheckCircleIcon,\r\n  MagnifyingGlassIcon,\r\n  XMarkIcon,\r\n  PhotoIcon,\r\n  ArrowUpTrayIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport type { Curso, GrupoCurso, Deportista } from '@/types';\r\nimport { uploadToCloudinary, validateImageFile } from '@/lib/cloudinary';\r\n\r\ntype Step = 'participante' | 'curso' | 'pago' | 'confirmacion';\r\n\r\nfunction InscribirContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  const [step, setStep] = useState<Step>('participante');\r\n  const [loading, setLoading] = useState(false);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const [participantes, setParticipantes] = useState<Deportista[]>([]);\r\n  const [cursos, setCursos] = useState<Curso[]>([]);\r\n  const [grupos, setGrupos] = useState<GrupoCurso[]>([]);\r\n  const [loadingGrupos, setLoadingGrupos] = useState(false);\r\n\r\n  // Paginación y filtros para cursos\r\n  const [cursoPage, setCursoPage] = useState(1);\r\n  const [cursoSearch, setCursoSearch] = useState('');\r\n  const cursosPerPage = 6;\r\n\r\n  // Paginación para grupos\r\n  const [grupoPage, setGrupoPage] = useState(1);\r\n  const gruposPerPage = 4;\r\n\r\n  const [selectedParticipante, setSelectedParticipante] = useState<\r\n    number | null\r\n  >(null);\r\n  const [selectedCurso, setSelectedCurso] = useState<number | null>(null);\r\n  const [selectedGrupo, setSelectedGrupo] = useState<number | null>(null);\r\n  const [pagoData, setPagoData] = useState({\r\n    metodo_pago: 'transferencia',\r\n    referencia: '',\r\n    observaciones: '',\r\n  });\r\n\r\n  // Estados para el comprobante\r\n  const [comprobante, setComprobante] = useState<File | null>(null);\r\n  const [comprobantePreview, setComprobantePreview] = useState<string>('');\r\n  const [uploadingComprobante, setUploadingComprobante] = useState(false);\r\n\r\n  const formatCurrency = (n: number) =>\r\n    new Intl.NumberFormat('es-ES', {\r\n      style: 'currency',\r\n      currency: 'USD',\r\n    }).format(n);\r\n  const formatDate = (d: string) =>\r\n    new Date(d).toLocaleDateString('es-ES', {\r\n      day: 'numeric',\r\n      month: 'short',\r\n      year: 'numeric',\r\n    });\r\n  const formatTime = (t: string) => {\r\n    if (!t) return '';\r\n    const [hr, min] = t.split(':');\r\n    const h = parseInt(hr);\r\n    return `${h % 12 || 12}:${min} ${h >= 12 ? 'PM' : 'AM'}`;\r\n  };\r\n  const getDias = (dias: string[] | number[] | string | undefined) => {\r\n    if (!dias) return 'Por definir';\r\n\r\n    // Si es un string, intentar parsearlo como JSON\r\n    let diasArray: (string | number)[] = [];\r\n    if (typeof dias === 'string') {\r\n      try {\r\n        diasArray = JSON.parse(dias);\r\n      } catch {\r\n        // Si no es JSON válido, dividir por comas\r\n        diasArray = dias.split(',').map((d) => d.trim());\r\n      }\r\n    } else if (Array.isArray(dias)) {\r\n      diasArray = dias;\r\n    } else {\r\n      return 'Por definir';\r\n    }\r\n\r\n    if (!diasArray.length) return 'Por definir';\r\n\r\n    const map: Record<string, string> = {\r\n      '0': 'Dom',\r\n      '1': 'Lun',\r\n      '2': 'Mar',\r\n      '3': 'Mié',\r\n      '4': 'Jue',\r\n      '5': 'Vie',\r\n      '6': 'Sáb',\r\n    };\r\n    return diasArray.map((d) => map[String(d)] || String(d)).join(', ');\r\n  };\r\n\r\n  const loadData = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [partData, cursosData] = await Promise.all([\r\n        deportistasService.getMisParticipantes(),\r\n        cursosService.getCursosAbiertos(),\r\n      ]);\r\n      setParticipantes(Array.isArray(partData) ? partData : []);\r\n      setCursos(cursosData || []);\r\n\r\n      const cursoParam = searchParams.get('curso');\r\n      if (cursoParam) {\r\n        const cursoId = parseInt(cursoParam);\r\n        setSelectedCurso(cursoId);\r\n        const gruposData = await cursosService.getGruposPublico(cursoId);\r\n        setGrupos(gruposData || []);\r\n        const grupoParam = searchParams.get('grupo');\r\n        if (grupoParam) setSelectedGrupo(parseInt(grupoParam));\r\n      }\r\n    } catch {\r\n      setError('Error al cargar datos');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [searchParams]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [loadData]);\r\n\r\n  const handleCursoSelect = async (cursoId: number) => {\r\n    setSelectedCurso(cursoId);\r\n    setSelectedGrupo(null);\r\n    setGrupoPage(1);\r\n    setLoadingGrupos(true);\r\n    try {\r\n      const gruposData = await cursosService.getGruposPublico(cursoId);\r\n      setGrupos(gruposData || []);\r\n    } catch {\r\n      setGrupos([]);\r\n    } finally {\r\n      setLoadingGrupos(false);\r\n    }\r\n  };\r\n\r\n  const handleComprobanteChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const validation = validateImageFile(file);\r\n    if (!validation.valid) {\r\n      setError(validation.error || 'Archivo inválido');\r\n      return;\r\n    }\r\n\r\n    setComprobante(file);\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      setComprobantePreview(reader.result as string);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!selectedParticipante || !selectedCurso || !selectedGrupo) {\r\n      setError('Completa todos los campos');\r\n      return;\r\n    }\r\n\r\n    // Validar que haya comprobante para transferencia o efectivo\r\n    if (\r\n      (pagoData.metodo_pago === 'transferencia' ||\r\n        pagoData.metodo_pago === 'efectivo') &&\r\n      !comprobante\r\n    ) {\r\n      setError('Debes subir un comprobante de pago');\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    setError('');\r\n\r\n    try {\r\n      let comprobanteUrl = '';\r\n\r\n      // Subir comprobante a Cloudinary si existe\r\n      if (comprobante) {\r\n        setUploadingComprobante(true);\r\n        const uploadResult = await uploadToCloudinary(\r\n          comprobante,\r\n          'comprobantes',\r\n        );\r\n        comprobanteUrl = uploadResult.secure_url;\r\n        setUploadingComprobante(false);\r\n      }\r\n\r\n      // Crear inscripción con URL del comprobante\r\n      await inscripcionesService.create({\r\n        id_curso: selectedCurso,\r\n        id_grupo: selectedGrupo,\r\n        id_deportista: selectedParticipante,\r\n        generar_factura: true,\r\n        observaciones: `${pagoData.observaciones || ''} - Método: ${pagoData.metodo_pago} - Ref: ${pagoData.referencia || 'N/A'}${comprobanteUrl ? ` - Comprobante: ${comprobanteUrl}` : ''}`,\r\n      });\r\n\r\n      setSuccess(\r\n        '¡Inscripción realizada! El administrador verificará tu pago.',\r\n      );\r\n      setStep('confirmacion');\r\n    } catch (err: any) {\r\n      setError(err.message || 'Error al inscribir');\r\n    } finally {\r\n      setSubmitting(false);\r\n      setUploadingComprobante(false);\r\n    }\r\n  };\r\n\r\n  // Filtrar y paginar cursos\r\n  const cursosFiltrados = cursos.filter((c) => {\r\n    return c.nombre.toLowerCase().includes(cursoSearch.toLowerCase());\r\n  });\r\n  const totalCursoPages = Math.ceil(cursosFiltrados.length / cursosPerPage);\r\n  const cursosPaginados = cursosFiltrados.slice(\r\n    (cursoPage - 1) * cursosPerPage,\r\n    cursoPage * cursosPerPage,\r\n  );\r\n\r\n  // Paginar grupos\r\n  const totalGrupoPages = Math.ceil(grupos.length / gruposPerPage);\r\n  const gruposPaginados = grupos.slice(\r\n    (grupoPage - 1) * gruposPerPage,\r\n    grupoPage * gruposPerPage,\r\n  );\r\n\r\n  // Obtener datos seleccionados\r\n  const partSel = participantes.find(\r\n    (p) => p.id_deportista === selectedParticipante,\r\n  );\r\n  const cursoSel = cursos.find((c) => c.id_curso === selectedCurso);\r\n  const grupoSel = grupos.find((g) => g.id_grupo === selectedGrupo);\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"max-w-3xl mx-auto space-y-6\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"p-2 bg-green-50 rounded-lg\">\r\n            <AcademicCapIcon className=\"h-5 w-5 text-green-600\" />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-lg font-semibold\">Inscribir en Curso</h1>\r\n            <p className=\"text-xs text-gray-500\">\r\n              Inscribe a tu hijo en un curso vacacional\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {error && (\r\n          <Alert variant=\"error\" onClose={() => setError('')}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n        {success && (\r\n          <Alert variant=\"success\" onClose={() => setSuccess('')}>\r\n            {success}\r\n          </Alert>\r\n        )}\r\n\r\n        {/* Steps */}\r\n        <div className=\"flex items-center justify-between px-2\">\r\n          {(['participante', 'curso', 'pago', 'confirmacion'] as Step[]).map(\r\n            (s, i) => {\r\n              const labels = ['Participante', 'Curso', 'Pago', 'Confirmación'];\r\n              const isActive = s === step;\r\n              const isDone =\r\n                (s === 'participante' && selectedParticipante) ||\r\n                (s === 'curso' && selectedGrupo) ||\r\n                (s === 'pago' && step === 'confirmacion');\r\n              return (\r\n                <div key={s} className=\"flex items-center\">\r\n                  <div\r\n                    className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\r\n                      isActive\r\n                        ? 'bg-green-600 text-white'\r\n                        : isDone\r\n                          ? 'bg-green-500 text-white'\r\n                          : 'bg-gray-200'\r\n                    }`}\r\n                  >\r\n                    {isDone && !isActive ? (\r\n                      <CheckCircleIcon className=\"h-5 w-5\" />\r\n                    ) : (\r\n                      i + 1\r\n                    )}\r\n                  </div>\r\n                  <span\r\n                    className={`ml-2 text-sm ${\r\n                      isActive ? 'text-green-600 font-medium' : 'text-gray-500'\r\n                    }`}\r\n                  >\r\n                    {labels[i]}\r\n                  </span>\r\n                  {i < 3 && <div className=\"w-8 h-0.5 mx-2 bg-gray-200\" />}\r\n                </div>\r\n              );\r\n            },\r\n          )}\r\n        </div>\r\n\r\n        <Card className=\"p-6\">\r\n          {/* Step 1 */}\r\n          {step === 'participante' && (\r\n            <div className=\"space-y-4\">\r\n              <h2 className=\"font-medium\">¿A quién deseas inscribir?</h2>\r\n              <div className=\"space-y-2\">\r\n                {participantes.map((p) => (\r\n                  <button\r\n                    key={p.id_deportista}\r\n                    onClick={() => setSelectedParticipante(p.id_deportista)}\r\n                    className={`w-full p-4 text-left border rounded-lg ${\r\n                      selectedParticipante === p.id_deportista\r\n                        ? 'border-green-600 bg-green-50'\r\n                        : 'border-gray-200 hover:border-green-300'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex justify-between items-center\">\r\n                      <div>\r\n                        <p className=\"font-medium\">\r\n                          {p.nombres} {p.apellidos}\r\n                        </p>\r\n                        <p className=\"text-sm text-gray-500\">\r\n                          {p.categoria?.nombre || 'Sin categoría'}\r\n                        </p>\r\n                      </div>\r\n                      {selectedParticipante === p.id_deportista && (\r\n                        <CheckCircleIcon className=\"h-6 w-6 text-green-600\" />\r\n                      )}\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              <div className=\"flex justify-end pt-4\">\r\n                <Button\r\n                  onClick={() => setStep('curso')}\r\n                  disabled={!selectedParticipante}\r\n                >\r\n                  Continuar\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 2 */}\r\n          {step === 'curso' && (\r\n            <div className=\"space-y-4\">\r\n              <h2 className=\"font-medium\">Selecciona el curso y horario</h2>\r\n\r\n              {/* Buscador */}\r\n              <div className=\"relative\">\r\n                <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Buscar curso...\"\r\n                  value={cursoSearch}\r\n                  onChange={(e) => {\r\n                    setCursoSearch(e.target.value);\r\n                    setCursoPage(1);\r\n                  }}\r\n                  className=\"w-full pl-10 pr-10 py-2.5 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                />\r\n                {cursoSearch && (\r\n                  <button\r\n                    onClick={() => setCursoSearch('')}\r\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2\"\r\n                  >\r\n                    <XMarkIcon className=\"h-5 w-5 text-gray-400 hover:text-gray-600\" />\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {/* Lista de cursos */}\r\n              {loading ? (\r\n                <div className=\"flex justify-center py-8\">\r\n                  <Spinner />\r\n                </div>\r\n              ) : cursosPaginados.length === 0 ? (\r\n                <div className=\"text-center py-8 text-gray-500\">\r\n                  {cursoSearch\r\n                    ? 'No se encontraron cursos con ese nombre'\r\n                    : 'No hay cursos disponibles'}\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <div className=\"space-y-2\">\r\n                    {cursosPaginados.map((c) => (\r\n                      <button\r\n                        key={c.id_curso}\r\n                        onClick={() => handleCursoSelect(c.id_curso)}\r\n                        className={`w-full p-4 text-left border rounded-lg transition-all ${\r\n                          selectedCurso === c.id_curso\r\n                            ? 'border-green-600 bg-green-50 shadow-sm'\r\n                            : 'border-gray-200 hover:border-green-300 hover:shadow-sm'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex justify-between items-start\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <p className=\"font-medium\">{c.nombre}</p>\r\n                              <span\r\n                                className={`text-xs px-2 py-0.5 rounded ${\r\n                                  c.tipo === 'vacacional'\r\n                                    ? 'bg-blue-100 text-blue-700'\r\n                                    : 'bg-purple-100 text-purple-700'\r\n                                }`}\r\n                              >\r\n                                {c.tipo}\r\n                              </span>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-500 mt-1\">\r\n                              {formatDate(c.fecha_inicio)} -{' '}\r\n                              {formatDate(c.fecha_fin)}\r\n                            </p>\r\n                            {c.descripcion && (\r\n                              <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">\r\n                                {c.descripcion}\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                          <div className=\"text-right ml-4\">\r\n                            <p className=\"font-semibold text-green-600 text-lg\">\r\n                              {formatCurrency(c.precio || 0)}\r\n                            </p>\r\n                            {selectedCurso === c.id_curso && (\r\n                              <CheckCircleIcon className=\"h-6 w-6 text-green-600 mt-1 ml-auto\" />\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {/* Paginación de cursos */}\r\n                  {totalCursoPages > 1 && (\r\n                    <div className=\"flex justify-center pt-2\">\r\n                      <Pagination\r\n                        page={cursoPage}\r\n                        lastPage={totalCursoPages}\r\n                        total={cursosFiltrados.length}\r\n                        perPage={cursosPerPage}\r\n                        onPageChange={setCursoPage}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n\r\n              {/* Selección de grupo/horario */}\r\n              {selectedCurso && (\r\n                <div className=\"space-y-2 pt-4 border-t\">\r\n                  <label className=\"text-sm font-medium\">\r\n                    Selecciona el horario\r\n                  </label>\r\n                  {loadingGrupos ? (\r\n                    <div className=\"flex justify-center py-4\">\r\n                      <Spinner />\r\n                    </div>\r\n                  ) : grupos.length === 0 ? (\r\n                    <p className=\"text-gray-500 text-center py-4\">\r\n                      No hay horarios disponibles para este curso\r\n                    </p>\r\n                  ) : (\r\n                    <>\r\n                      <div className=\"space-y-2\">\r\n                        {gruposPaginados.map((g) => {\r\n                          const cupos = g.cupo_maximo - (g.cupo_actual || 0);\r\n                          const full = cupos <= 0;\r\n                          return (\r\n                            <button\r\n                              key={g.id_grupo}\r\n                              onClick={() =>\r\n                                !full && setSelectedGrupo(g.id_grupo)\r\n                              }\r\n                              disabled={full}\r\n                              className={`w-full p-3 text-left border rounded-lg transition-all ${\r\n                                full\r\n                                  ? 'opacity-50 cursor-not-allowed bg-gray-50'\r\n                                  : selectedGrupo === g.id_grupo\r\n                                    ? 'border-green-600 bg-green-50'\r\n                                    : 'border-gray-200 hover:border-green-300'\r\n                              }`}\r\n                            >\r\n                              <div className=\"flex justify-between items-center\">\r\n                                <div className=\"flex-1\">\r\n                                  <p className=\"font-medium text-sm\">\r\n                                    {g.nombre}\r\n                                  </p>\r\n                                  <p className=\"text-xs text-gray-500 mt-0.5\">\r\n                                    {formatTime(g.hora_inicio || '')} -{' '}\r\n                                    {formatTime(g.hora_fin || '')} |{' '}\r\n                                    {getDias(g.dias_semana)}\r\n                                  </p>\r\n                                  {g.instructor && (\r\n                                    <p className=\"text-xs text-gray-600 mt-0.5\">\r\n                                      Instructor: {g.instructor.nombre}{' '}\r\n                                      {g.instructor.apellido}\r\n                                    </p>\r\n                                  )}\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <span\r\n                                    className={`text-xs px-2 py-1 rounded font-medium ${\r\n                                      full\r\n                                        ? 'bg-red-100 text-red-700'\r\n                                        : cupos <= 5\r\n                                          ? 'bg-amber-100 text-amber-700'\r\n                                          : 'bg-green-100 text-green-700'\r\n                                    }`}\r\n                                  >\r\n                                    {full ? 'Lleno' : `${cupos} cupos`}\r\n                                  </span>\r\n                                  {selectedGrupo === g.id_grupo && (\r\n                                    <CheckCircleIcon className=\"h-5 w-5 text-green-600\" />\r\n                                  )}\r\n                                </div>\r\n                              </div>\r\n                            </button>\r\n                          );\r\n                        })}\r\n                      </div>\r\n\r\n                      {/* Paginación de grupos */}\r\n                      {totalGrupoPages > 1 && (\r\n                        <div className=\"flex justify-center pt-2\">\r\n                          <Pagination\r\n                            page={grupoPage}\r\n                            lastPage={totalGrupoPages}\r\n                            total={grupos.length}\r\n                            perPage={gruposPerPage}\r\n                            onPageChange={setGrupoPage}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex justify-between pt-4\">\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  onClick={() => setStep('participante')}\r\n                >\r\n                  Atrás\r\n                </Button>\r\n                <Button\r\n                  onClick={() => setStep('pago')}\r\n                  disabled={!selectedGrupo}\r\n                >\r\n                  Continuar\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 3 */}\r\n          {step === 'pago' && (\r\n            <div className=\"space-y-4\">\r\n              <h2 className=\"font-medium\">Información de Pago</h2>\r\n\r\n              {/* Resumen */}\r\n              <div className=\"p-4 bg-gray-50 rounded-lg space-y-2 text-sm\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Participante:</span>\r\n                  <span className=\"font-medium\">\r\n                    {partSel?.nombres} {partSel?.apellidos}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Curso:</span>\r\n                  <span className=\"font-medium\">{cursoSel?.nombre}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Horario:</span>\r\n                  <span className=\"font-medium\">{grupoSel?.nombre}</span>\r\n                </div>\r\n                <div className=\"flex justify-between pt-2 border-t\">\r\n                  <span className=\"font-medium\">Total:</span>\r\n                  <span className=\"text-lg font-bold text-green-600\">\r\n                    {formatCurrency(cursoSel?.precio || 0)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Método de pago */}\r\n              <Select\r\n                label=\"Método de pago\"\r\n                value={pagoData.metodo_pago}\r\n                onChange={(e) => {\r\n                  setPagoData({ ...pagoData, metodo_pago: e.target.value });\r\n                  // Limpiar comprobante si cambia a tarjeta\r\n                  if (e.target.value === 'tarjeta') {\r\n                    setComprobante(null);\r\n                    setComprobantePreview('');\r\n                  }\r\n                }}\r\n                options={[\r\n                  { value: 'transferencia', label: 'Transferencia Bancaria' },\r\n                  { value: 'efectivo', label: 'Efectivo' },\r\n                ]}\r\n              />\r\n\r\n              {/* Referencia de pago */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">\r\n                  Referencia de pago{' '}\r\n                  {pagoData.metodo_pago === 'transferencia' && (\r\n                    <span className=\"text-red-500\">*</span>\r\n                  )}\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={pagoData.referencia}\r\n                  onChange={(e) =>\r\n                    setPagoData({ ...pagoData, referencia: e.target.value })\r\n                  }\r\n                  className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                  placeholder={\r\n                    pagoData.metodo_pago === 'transferencia'\r\n                      ? 'Número de referencia de la transferencia'\r\n                      : 'Número de recibo (opcional)'\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              {/* Comprobante de pago */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">\r\n                  Comprobante de pago <span className=\"text-red-500\">*</span>\r\n                </label>\r\n\r\n                {!comprobantePreview ? (\r\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-400 transition-colors\">\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleComprobanteChange}\r\n                      className=\"hidden\"\r\n                      id=\"comprobante-upload\"\r\n                    />\r\n                    <label\r\n                      htmlFor=\"comprobante-upload\"\r\n                      className=\"cursor-pointer flex flex-col items-center\"\r\n                    >\r\n                      <ArrowUpTrayIcon className=\"h-12 w-12 text-gray-400 mb-2\" />\r\n                      <span className=\"text-sm font-medium text-gray-700\">\r\n                        Subir comprobante\r\n                      </span>\r\n                      <span className=\"text-xs text-gray-500 mt-1\">\r\n                        JPG, PNG o WEBP (máx. 5MB)\r\n                      </span>\r\n                    </label>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"relative border rounded-lg overflow-hidden\">\r\n                    <img\r\n                      src={comprobantePreview}\r\n                      alt=\"Comprobante\"\r\n                      className=\"w-full h-48 object-contain bg-gray-50\"\r\n                    />\r\n                    <button\r\n                      onClick={() => {\r\n                        setComprobante(null);\r\n                        setComprobantePreview('');\r\n                      }}\r\n                      className=\"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\r\n                    >\r\n                      <XMarkIcon className=\"h-5 w-5\" />\r\n                    </button>\r\n                    <div className=\"p-2 bg-gray-50 border-t\">\r\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n                        <PhotoIcon className=\"h-4 w-4\" />\r\n                        <span className=\"truncate\">{comprobante?.name}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Observaciones */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">\r\n                  Observaciones (opcional)\r\n                </label>\r\n                <textarea\r\n                  value={pagoData.observaciones}\r\n                  onChange={(e) =>\r\n                    setPagoData({ ...pagoData, observaciones: e.target.value })\r\n                  }\r\n                  className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                  rows={3}\r\n                  placeholder=\"Información adicional sobre el pago...\"\r\n                />\r\n              </div>\r\n\r\n              {/* Alerta */}\r\n              <div className=\"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-800\">\r\n                <p className=\"font-medium mb-1\">⚠️ Importante:</p>\r\n                <p>\r\n                  Tu inscripción quedará pendiente hasta que el administrador\r\n                  verifique el comprobante de pago. Recibirás una notificación\r\n                  cuando sea aprobada.\r\n                </p>\r\n              </div>\r\n\r\n              {/* Botones */}\r\n              <div className=\"flex justify-between pt-4\">\r\n                <Button variant=\"secondary\" onClick={() => setStep('curso')}>\r\n                  Atrás\r\n                </Button>\r\n                <Button\r\n                  onClick={handleSubmit}\r\n                  isLoading={submitting || uploadingComprobante}\r\n                  disabled={!comprobante}\r\n                >\r\n                  {uploadingComprobante\r\n                    ? 'Subiendo comprobante...'\r\n                    : 'Confirmar Inscripción'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 4 */}\r\n          {step === 'confirmacion' && (\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <CheckCircleIcon className=\"h-10 w-10 text-green-600\" />\r\n              </div>\r\n              <h2 className=\"text-xl font-bold mb-2\">\r\n                ¡Inscripción Registrada!\r\n              </h2>\r\n              <p className=\"text-gray-600 mb-6\">\r\n                El administrador verificará tu pago y recibirás confirmación.\r\n              </p>\r\n              <div className=\"p-4 bg-gray-50 rounded-lg text-left text-sm mb-6 max-w-sm mx-auto\">\r\n                <p>\r\n                  <span className=\"text-gray-600\">Participante:</span>{' '}\r\n                  {partSel?.nombres} {partSel?.apellidos}\r\n                </p>\r\n                <p>\r\n                  <span className=\"text-gray-600\">Curso:</span>{' '}\r\n                  {cursoSel?.nombre}\r\n                </p>\r\n                <p>\r\n                  <span className=\"text-gray-600\">Grupo:</span>{' '}\r\n                  {grupoSel?.nombre}\r\n                </p>\r\n              </div>\r\n              <div className=\"flex gap-3 justify-center\">\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  onClick={() => router.push('/mis-participantes')}\r\n                >\r\n                  Ver Participantes\r\n                </Button>\r\n                <Button onClick={() => router.push('/dashboard')}>\r\n                  Ir al Dashboard\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </Card>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default function InscribirPage() {\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <DashboardLayout>\r\n          <div className=\"flex justify-center items-center h-64\">\r\n            <Spinner />\r\n          </div>\r\n        </DashboardLayout>\r\n      }\r\n    >\r\n      <InscribirContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","import * as React from \"react\";\nfunction ArrowUpTrayIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowUpTrayIcon);\nexport default ForwardRef;","/**\r\n * Utilidad para subir imágenes a Cloudinary\r\n */\r\n\r\nconst CLOUDINARY_CLOUD_NAME = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME;\r\nconst CLOUDINARY_UPLOAD_PRESET =\r\n  process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;\r\n\r\nexport interface CloudinaryUploadResponse {\r\n  secure_url: string;\r\n  public_id: string;\r\n  format: string;\r\n  width: number;\r\n  height: number;\r\n  bytes: number;\r\n}\r\n\r\nexport async function uploadToCloudinary(\r\n  file: File,\r\n  folder: string = 'comprobantes',\r\n): Promise<CloudinaryUploadResponse> {\r\n  if (!CLOUDINARY_CLOUD_NAME || !CLOUDINARY_UPLOAD_PRESET) {\r\n    throw new Error('Cloudinary no está configurado correctamente');\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);\r\n  formData.append('folder', folder);\r\n\r\n  try {\r\n    const response = await fetch(\r\n      `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`,\r\n      {\r\n        method: 'POST',\r\n        body: formData,\r\n      },\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Error al subir la imagen');\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error uploading to Cloudinary:', error);\r\n    throw new Error('No se pudo subir la imagen. Intenta nuevamente.');\r\n  }\r\n}\r\n\r\nexport function validateImageFile(file: File): {\r\n  valid: boolean;\r\n  error?: string;\r\n} {\r\n  // Validar tipo de archivo\r\n  const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\r\n  if (!validTypes.includes(file.type)) {\r\n    return {\r\n      valid: false,\r\n      error: 'Solo se permiten imágenes (JPG, PNG, WEBP)',\r\n    };\r\n  }\r\n\r\n  // Validar tamaño (máximo 5MB)\r\n  const maxSize = 5 * 1024 * 1024; // 5MB\r\n  if (file.size > maxSize) {\r\n    return {\r\n      valid: false,\r\n      error: 'La imagen no debe superar 5MB',\r\n    };\r\n  }\r\n\r\n  return { valid: true };\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[1]}