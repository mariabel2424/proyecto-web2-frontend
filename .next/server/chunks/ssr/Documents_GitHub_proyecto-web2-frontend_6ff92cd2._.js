module.exports=[74891,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});a.s(["TrashIcon",0,c],74891)},65513,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});a.s(["PlusIcon",0,c],65513)},60407,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))});a.s(["PencilSquareIcon",0,c],60407)},2490,a=>{"use strict";var b=a.i(21652),c=a.i(34680);a.s(["instructoresService",0,{async getAll(a){let{data:d}=await b.apiClient.get(c.API_ENDPOINTS.instructores,a);if(d&&"object"==typeof d&&"success"in d&&d.data){let a=d.data;return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}return Array.isArray(d)?{data:d,total:d.length,current_page:1,last_page:1,per_page:d.length,from:1,to:d.length}:d},async getDisponibles(){let{data:a}=await b.apiClient.get(`${c.API_ENDPOINTS.instructores}/disponibles/listar`);return a&&"object"==typeof a&&"instructores"in a?a.instructores.map(a=>({id_usuario:a.id_usuario||a.id_instructor||0,nombre:a.nombres||a.nombre||"",apellido:a.apellidos||a.apellido||"",email:a.email||"",especialidad:a.especialidad,status:"activo",id_rol:0,created_at:"",updated_at:""})):a&&"object"==typeof a&&"data"in a?a.data:a}},"rolesService",0,{async getAll(){console.log("Llamando a:",c.API_ENDPOINTS.roles);let{data:a}=await b.apiClient.get(c.API_ENDPOINTS.roles);return console.log("Respuesta roles:",a),Array.isArray(a)?a:a.data},async getById(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.roles}/${a}`);return d},async create(a){let{data:d}=await b.apiClient.post(c.API_ENDPOINTS.roles,a);return d.data},async update(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.roles}/${a}`,d);return e.data},async delete(a){await b.apiClient.delete(`${c.API_ENDPOINTS.roles}/${a}`)}},"usuariosService",0,{async getAll(a){let{data:d}=await b.apiClient.get(c.API_ENDPOINTS.usuarios,a);if(d&&"object"==typeof d&&"success"in d&&d.data){let a=d.data;return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}return Array.isArray(d)?{data:d,total:d.length,current_page:1,last_page:1,per_page:d.length,from:1,to:d.length}:d},async getById(a){let{data:d}=await b.apiClient.get(`${c.API_ENDPOINTS.usuarios}/${a}`);return d},async create(a){let{data:d}=await b.apiClient.post(c.API_ENDPOINTS.usuarios,a);return d},async update(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.usuarios}/${a}`,d);return e},async delete(a){await b.apiClient.delete(`${c.API_ENDPOINTS.usuarios}/${a}`)},async cambiarEstado(a,d){let{data:e}=await b.apiClient.put(`${c.API_ENDPOINTS.usuarios}/${a}/estado`,{status:d});return e}}])},3040,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});a.s(["XMarkIcon",0,c],3040)},18092,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))});a.s(["CheckIcon",0,c],18092)},58588,a=>{"use strict";var b=a.i(98620);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))});a.s(["ShieldCheckIcon",0,c],58588)},70331,a=>{"use strict";var b=a.i(57692),c=a.i(98620);a.i(67360);var d=a.i(4656),e=a.i(2490),f=a.i(21652);let g={async getAll(a){try{let{data:b}=await f.apiClient.get("/permisos",a);return Array.isArray(b)?b:b.data||[]}catch(a){return console.error("Error obteniendo permisos:",a),[]}},async getModulos(){try{let{data:a}=await f.apiClient.get("/permisos/modulos");return Array.isArray(a)?a:[]}catch(a){return console.error("Error obteniendo módulos:",a),[]}},async create(a){let{data:b}=await f.apiClient.post("/permisos",a);return b.data},async update(a,b){let{data:c}=await f.apiClient.put(`/permisos/${a}`,b);return c.data},async delete(a){await f.apiClient.delete(`/permisos/${a}`)}};a.i(95994);var h=a.i(77314),i=a.i(72328),j=a.i(65513),k=a.i(60407),l=a.i(74891),m=a.i(58588),n=a.i(3040),o=a.i(18092);function p(){let[a,f]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)({nombre:"",descripcion:"",permisos:[]});(0,c.useEffect)(()=>{J(),K()},[]);let J=async()=>{try{let a=await e.rolesService.getAll();console.log("Roles cargados:",a),f(Array.isArray(a)?a:[])}catch(a){console.error("Error cargando roles:",a),f([])}finally{u(!1)}},K=async()=>{try{let[a,b]=await Promise.all([g.getAll({per_page:200}),g.getModulos()]);q(a),s(b)}catch(a){console.error("Error cargando permisos:",a),q([]),s([])}},L=async a=>{a.preventDefault(),E(!0);try{F?await e.rolesService.update(F.id_rol,H):await e.rolesService.create(H),w(!1),N(),J()}catch(a){console.error("Error guardando rol:",a)}finally{E(!1)}},M=async()=>{if(z){C(!0);try{await e.rolesService.delete(z),J()}catch(a){console.error("Error:",a)}finally{C(!1),y(!1),A(null)}}},N=()=>{G(null),I({nombre:"",descripcion:"",permisos:[]})};return t?(0,b.jsx)(d.DashboardLayout,{children:(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600"})})}):(0,b.jsx)(d.DashboardLayout,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-green-50 rounded-lg",children:(0,b.jsx)(m.ShieldCheckIcon,{className:"h-5 w-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Roles"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.length," registros"]})]})]}),(0,b.jsxs)(h.Button,{size:"sm",onClick:()=>{N(),w(!0)},children:[(0,b.jsx)(j.PlusIcon,{className:"h-4 w-4 mr-1"}),"Nuevo"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center",children:(0,b.jsx)(m.ShieldCheckIcon,{className:"h-5 w-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:a.nombre}),a.permisos&&a.permisos.length>0&&(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.permisos.length," permiso",1!==a.permisos.length?"s":""]})]})]})}),a.descripcion&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:a.descripcion}),a.permisos&&a.permisos.length>0&&(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.permisos.slice(0,3).map(a=>(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-50 text-green-700 rounded",children:a.nombre},a.id_permiso)),a.permisos.length>3&&(0,b.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded",children:["+",a.permisos.length-3," más"]})]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-1 pt-3 border-t border-gray-100",children:[(0,b.jsx)("button",{onClick:()=>{G(a),I({nombre:a.nombre,descripcion:a.descripcion||"",permisos:a.permisos?.map(a=>a.id_permiso)||[]}),w(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,b.jsx)(k.PencilSquareIcon,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>{A(a.id_rol),y(!0)},className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,b.jsx)(l.TrashIcon,{className:"h-4 w-4"})})]})]},a.id_rol))}),v&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-5 w-full max-w-2xl shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:[F?"Editar":"Nuevo"," Rol"]}),(0,b.jsx)("button",{onClick:()=>w(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg",children:(0,b.jsx)(n.XMarkIcon,{className:"h-5 w-5"})})]}),(0,b.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Nombre"}),(0,b.jsx)("input",{type:"text",value:H.nombre,onChange:a=>I({...H,nombre:a.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Descripción"}),(0,b.jsx)("textarea",{value:H.descripcion,onChange:a=>I({...H,descripcion:a.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500",rows:2})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:["Permisos (",H.permisos.length," seleccionados)"]}),(0,b.jsx)("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto",children:r.map(a=>{let c=p.filter(b=>b.modulo===a),d=c.every(a=>H.permisos.includes(a.id_permiso));return(0,b.jsxs)("div",{className:"border-b border-gray-100 last:border-0",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{let b;(b=p.filter(b=>b.modulo===a).map(a=>a.id_permiso)).every(a=>H.permisos.includes(a))?I(a=>({...a,permisos:a.permisos.filter(a=>!b.includes(a))})):I(a=>({...a,permisos:[...new Set([...a.permisos,...b])]}))},className:"w-full px-3 py-2 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:a}),(0,b.jsx)("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${d?"bg-green-600 border-green-600":"border-gray-300"}`,children:d&&(0,b.jsx)(o.CheckIcon,{className:"h-3 w-3 text-white"})})]}),(0,b.jsx)("div",{className:"px-6 pb-2 space-y-1",children:c.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:H.permisos.includes(a.id_permiso),onChange:()=>{var b;return b=a.id_permiso,void I(a=>({...a,permisos:a.permisos.includes(b)?a.permisos.filter(a=>a!==b):[...a.permisos,b]}))},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("span",{className:"text-xs text-gray-700",children:a.nombre}),a.descripcion&&(0,b.jsx)("p",{className:"text-xs text-gray-400",children:a.descripcion})]})]},a.id_permiso))})]},a)})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,b.jsx)(h.Button,{type:"button",variant:"secondary",size:"sm",onClick:()=>w(!1),disabled:D,children:"Cancelar"}),(0,b.jsx)(h.Button,{type:"submit",size:"sm",disabled:D,children:D?"Guardando...":F?"Actualizar":"Crear"})]})]})]})}),(0,b.jsx)(i.ConfirmModal,{isOpen:x,onClose:()=>y(!1),onConfirm:M,title:"¿Eliminar rol?",message:"Esta acción no se puede deshacer.",isLoading:B})]})})}a.s(["default",()=>p],70331)}];

//# sourceMappingURL=Documents_GitHub_proyecto-web2-frontend_6ff92cd2._.js.map