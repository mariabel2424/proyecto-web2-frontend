(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47152,e=>{"use strict";var a=e.i(96564),t=e.i(55528);e.s(["instructoresService",0,{async getAll(e){let{data:l}=await a.apiClient.get(t.API_ENDPOINTS.instructores,e);if(l&&"object"==typeof l&&"success"in l&&l.data){let e=l.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(l)?{data:l,total:l.length,current_page:1,last_page:1,per_page:l.length,from:1,to:l.length}:l},async getDisponibles(){let{data:e}=await a.apiClient.get(`${t.API_ENDPOINTS.instructores}/disponibles/listar`);return e&&"object"==typeof e&&"instructores"in e?e.instructores.map(e=>({id_usuario:e.id_usuario||e.id_instructor||0,nombre:e.nombres||e.nombre||"",apellido:e.apellidos||e.apellido||"",email:e.email||"",especialidad:e.especialidad,status:"activo",id_rol:0,created_at:"",updated_at:""})):e&&"object"==typeof e&&"data"in e?e.data:e}},"rolesService",0,{async getAll(){console.log("Llamando a:",t.API_ENDPOINTS.roles);let{data:e}=await a.apiClient.get(t.API_ENDPOINTS.roles);return console.log("Respuesta roles:",e),Array.isArray(e)?e:e.data},async getById(e){let{data:l}=await a.apiClient.get(`${t.API_ENDPOINTS.roles}/${e}`);return l},async create(e){let{data:l}=await a.apiClient.post(t.API_ENDPOINTS.roles,e);return l.data},async update(e,l){let{data:r}=await a.apiClient.put(`${t.API_ENDPOINTS.roles}/${e}`,l);return r.data},async delete(e){await a.apiClient.delete(`${t.API_ENDPOINTS.roles}/${e}`)}},"usuariosService",0,{async getAll(e){let{data:l}=await a.apiClient.get(t.API_ENDPOINTS.usuarios,e);if(l&&"object"==typeof l&&"success"in l&&l.data){let e=l.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(l)?{data:l,total:l.length,current_page:1,last_page:1,per_page:l.length,from:1,to:l.length}:l},async getById(e){let{data:l}=await a.apiClient.get(`${t.API_ENDPOINTS.usuarios}/${e}`);return l},async create(e){let{data:l}=await a.apiClient.post(t.API_ENDPOINTS.usuarios,e);return l},async update(e,l){let{data:r}=await a.apiClient.put(`${t.API_ENDPOINTS.usuarios}/${e}`,l);return r},async delete(e){await a.apiClient.delete(`${t.API_ENDPOINTS.usuarios}/${e}`)},async cambiarEstado(e,l){let{data:r}=await a.apiClient.put(`${t.API_ENDPOINTS.usuarios}/${e}/estado`,{status:l});return r}}])},15552,e=>{"use strict";var a=e.i(44472),t=e.i(30680),l=e.i(96833);e.i(51766);var r=e.i(5174);e.i(36106);var i=e.i(75650),s=e.i(75227),o=e.i(13762),n=e.i(80028),d=e.i(47152);function c(){let e=(0,l.useRouter)(),c=Number((0,l.useParams)().id),[u,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(!0),[b,h]=(0,t.useState)(""),[y,v]=(0,t.useState)([]),[_,I]=(0,t.useState)({nombre:"",apellido:"",email:"",cedula:"",telefono:"",direccion:"",id_rol:"",estado:"activo"});(0,t.useEffect)(()=>{(async()=>{try{let[e,a]=await Promise.all([d.usuariosService.getById(c),d.rolesService.getAll()]);v(a),I({nombre:e.nombre||"",apellido:e.apellido||"",email:e.email||"",cedula:e.cedula||"",telefono:e.telefono||"",direccion:e.direccion||"",id_rol:e.id_rol?String(e.id_rol):"",estado:e.status||"activo"})}catch(e){h("Error al cargar el usuario"),console.error(e)}finally{m(!1)}})()},[c]);let N=e=>{let{name:a,value:t}=e.target;I(e=>({...e,[a]:t}))},f=async a=>{a.preventDefault(),p(!0),h("");try{await d.usuariosService.update(c,{nombre:_.nombre,apellido:_.apellido,email:_.email,cedula:_.cedula||void 0,telefono:_.telefono||void 0,direccion:_.direccion||void 0,id_rol:_.id_rol?parseInt(_.id_rol):void 0,status:_.estado}),e.push("/sistema/usuarios")}catch(e){h(e instanceof Error?e.message:"Error al actualizar")}finally{p(!1)}};return g?(0,a.jsx)(r.DashboardLayout,{children:(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):(0,a.jsx)(r.DashboardLayout,{children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{children:"Editar Usuario"})}),(0,a.jsxs)(i.CardContent,{children:[b&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:b}),(0,a.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(o.Input,{label:"Nombre",name:"nombre",value:_.nombre,onChange:N,required:!0}),(0,a.jsx)(o.Input,{label:"Apellido",name:"apellido",value:_.apellido,onChange:N,required:!0})]}),(0,a.jsx)(o.Input,{label:"Email",name:"email",type:"email",value:_.email,onChange:N,required:!0}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(o.Input,{label:"Cédula",name:"cedula",value:_.cedula,onChange:N}),(0,a.jsx)(o.Input,{label:"Teléfono",name:"telefono",value:_.telefono,onChange:N})]}),(0,a.jsx)(o.Input,{label:"Dirección",name:"direccion",value:_.direccion,onChange:N}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(n.Select,{label:"Rol",name:"id_rol",value:_.id_rol,onChange:N,placeholder:"Seleccionar rol",options:y.map(e=>({value:e.id_rol,label:e.nombre}))}),(0,a.jsx)(n.Select,{label:"Estado",name:"estado",value:_.estado,onChange:N,options:[{value:"activo",label:"Activo"},{value:"inactivo",label:"Inactivo"},{value:"suspendido",label:"Suspendido"}]})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)(s.Button,{type:"button",variant:"secondary",onClick:()=>e.back(),children:"Cancelar"}),(0,a.jsx)(s.Button,{type:"submit",disabled:u,children:u?"Guardando...":"Guardar Cambios"})]})]})]})]})})})}e.s(["default",()=>c])}]);