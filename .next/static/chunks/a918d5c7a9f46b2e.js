(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75171,e=>{"use strict";var t=e.i(30680);let r=t.forwardRef(function({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});e.s(["CheckCircleIcon",0,r],75171)},32959,e=>{"use strict";var t=e.i(96564),r=e.i(55528);e.s(["asistenciasService",0,{async getAsistencias(e,a){let{data:s}=await t.apiClient.get(`${r.API_ENDPOINTS.gruposCurso}/${e}/asistencias`,a?{fecha:a}:{});return s},async registrarAsistencias(e,a,s){let{data:n}=await t.apiClient.post(`${r.API_ENDPOINTS.gruposCurso}/${e}/asistencias`,{fecha:a,asistencias:s});return n},async getHistorial(e,a,s){let n={};a&&(n.fecha_inicio=a),s&&(n.fecha_fin=s);let{data:i}=await t.apiClient.get(`${r.API_ENDPOINTS.gruposCurso}/${e}/asistencias/historial`,n);return i},async getReporte(e,a){let{data:s}=await t.apiClient.get(`${r.API_ENDPOINTS.gruposCurso}/${e}/asistencias/reporte`,{fecha:a});return s}},"cursosService",0,{async getAll(e){let{data:a}=await t.apiClient.get(r.API_ENDPOINTS.cursos,e);if(a&&"object"==typeof a&&"success"in a&&a.data){let e=a.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return a&&"object"==typeof a&&"current_page"in a&&"data"in a?{data:Array.isArray(a.data)?a.data:[],total:a.total||0,current_page:a.current_page||1,last_page:a.last_page||1,per_page:a.per_page||15,from:a.from||0,to:a.to||0}:Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:{data:[],total:0,current_page:1,last_page:1,per_page:15,from:0,to:0}},async getById(e){let{data:a}=await t.apiClient.get(`${r.API_ENDPOINTS.cursos}/${e}`);return a},async create(e){let{data:a}=await t.apiClient.post(r.API_ENDPOINTS.cursos,e);return a},async update(e,a){let{data:s}=await t.apiClient.put(`${r.API_ENDPOINTS.cursos}/${e}`,a);return s},async delete(e){await t.apiClient.delete(`${r.API_ENDPOINTS.cursos}/${e}`)},async getCursosAbiertos(){let{data:e}=await t.apiClient.get(r.API_ENDPOINTS.cursosAbiertos);return e},async getParticipantes(e){let{data:a}=await t.apiClient.get(`${r.API_ENDPOINTS.cursos}/${e}/participantes`);return a},async getGruposDisponibles(e){let{data:a}=await t.apiClient.get(`${r.API_ENDPOINTS.cursos}/${e}/grupos-disponibles`);return a},async getGruposPublico(e){let{data:a}=await t.apiClient.get(`${r.API_ENDPOINTS.cursos}/${e}/grupos-publico`);return a}},"gruposCursoService",0,{async getAll(e){let{data:a}=await t.apiClient.get(r.API_ENDPOINTS.gruposCurso,e);if(a&&"object"==typeof a&&"success"in a&&a.data){let e=a.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a},async getById(e){let{data:a}=await t.apiClient.get(`${r.API_ENDPOINTS.gruposCurso}/${e}`);return a},async create(e){let{data:a}=await t.apiClient.post(r.API_ENDPOINTS.gruposCurso,e);return a},async update(e,a){let{data:s}=await t.apiClient.put(`${r.API_ENDPOINTS.gruposCurso}/${e}`,a);return s},async delete(e){await t.apiClient.delete(`${r.API_ENDPOINTS.gruposCurso}/${e}`)},async getDeportistas(e){let{data:a}=await t.apiClient.get(`${r.API_ENDPOINTS.gruposCurso}/${e}/deportistas`);return a},async asignarInstructor(e,a){let{data:s}=await t.apiClient.post(`${r.API_ENDPOINTS.gruposCurso}/${e}/asignar-instructor`,{id_instructor:a});return s},async quitarInstructor(e,a){let{data:s}=await t.apiClient.post(`${r.API_ENDPOINTS.gruposCurso}/${e}/quitar-instructor`,{id_instructor:a});return s},async getInstructores(e){let{data:a}=await t.apiClient.get(`${r.API_ENDPOINTS.gruposCurso}/${e}/instructores`);return a},async cambiarEstado(e,a){let{data:s}=await t.apiClient.patch(`${r.API_ENDPOINTS.gruposCurso}/${e}/cambiar-estado`,{estado:a});return s}},"inscripcionesService",0,{async getAll(e){let{data:a}=await t.apiClient.get(r.API_ENDPOINTS.inscripcionesCurso,e);if(a&&"object"==typeof a&&"success"in a&&a.data){let e=a.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a},async getById(e){let{data:a}=await t.apiClient.get(`${r.API_ENDPOINTS.inscripcionesCurso}/${e}`);return a},async create(e){let{data:a}=await t.apiClient.post(r.API_ENDPOINTS.inscripcionesCurso,e);return a},async update(e,a){let{data:s}=await t.apiClient.put(`${r.API_ENDPOINTS.inscripcionesCurso}/${e}`,a);return s},async delete(e){await t.apiClient.delete(`${r.API_ENDPOINTS.inscripcionesCurso}/${e}`)},async calificar(e,a,s){let{data:n}=await t.apiClient.post(`${r.API_ENDPOINTS.inscripcionesCurso}/${e}/calificar`,{calificacion:a,comentarios:s});return n},async cancelar(e,a){let{data:s}=await t.apiClient.patch(`${r.API_ENDPOINTS.inscripcionesCurso}/${e}/cancelar`,{motivo:a});return s},async generarFactura(e,a){let{data:s}=await t.apiClient.post(`${r.API_ENDPOINTS.inscripcionesCurso}/${e}/generar-factura`,{id_tutor:a});return s},async getMisInscripciones(e){let{data:r}=await t.apiClient.get("/mis-inscripciones",e);return Array.isArray(r)?{data:r,total:r.length,current_page:1,last_page:1,per_page:r.length,from:1,to:r.length}:r}}])},85607,e=>{"use strict";var t=e.i(30680);let r=t.forwardRef(function({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});e.s(["ClockIcon",0,r],85607)},8101,e=>{"use strict";var t=e.i(30680);let r=t.forwardRef(function({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});e.s(["ArrowLeftIcon",0,r],8101)},84845,e=>{"use strict";var t=e.i(30680);let r=t.forwardRef(function({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});e.s(["XCircleIcon",0,r],84845)},47120,e=>{"use strict";var t=e.i(30680);let r=t.forwardRef(function({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))});e.s(["CalendarIcon",0,r],47120)},48861,e=>{"use strict";var t=e.i(44472),r=e.i(30680),a=e.i(96833);e.i(51766);var s=e.i(5174);e.i(36106);var n=e.i(75227),i=e.i(55480),o=e.i(32959),l=e.i(8101),c=e.i(11247);e.i(75171),e.i(84845),e.i(85607);let d=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});var u=e.i(47120);function p(){let e=(0,a.useParams)(),p=(0,a.useRouter)(),g=Number(e.id),[m,x]=(0,r.useState)(()=>{let e=new Date,t=e.getTimezoneOffset();return new Date(e.getTime()+(t+-300)*6e4).toISOString().split("T")[0]}),[h,f]=(0,r.useState)(null),[y,b]=(0,r.useState)(""),[N,v]=(0,r.useState)([]),[w,j]=(0,r.useState)({}),[C,_]=(0,r.useState)(!0),[I,A]=(0,r.useState)(!1),[P,$]=(0,r.useState)(!1),[E,S]=(0,r.useState)(null),[O,T]=(0,r.useState)({presentes:0,ausentes:0,total:0}),D=async e=>{_(!0);try{let t=await o.asistenciasService.getAsistencias(g,e);f(t.grupo),b(t.fecha_formato||"");let r=t.estudiantes||[];v(r),T({presentes:t.presentes||0,ausentes:t.ausentes||0,total:t.total_estudiantes||r.length});let a={};r.forEach(e=>{a[e.id_deportista]={id_inscripcion:e.id_inscripcion,id_deportista:e.id_deportista,estado:e.asistencia?.estado||"presente",observaciones:e.asistencia?.observaciones||""}}),j(a)}catch(e){console.error("Error cargando asistencias:",e),S({tipo:"error",texto:"Error al cargar las asistencias"})}finally{_(!1)}};(0,r.useEffect)(()=>{g&&D(m)},[g,m]);let k=e=>{j(t=>{let r={...t};return Object.keys(r).forEach(t=>{r[Number(t)]={...r[Number(t)],estado:e}}),r})},L=async()=>{A(!0),S(null);try{let e=Object.values(w),t=await o.asistenciasService.registrarAsistencias(g,m,e);S({tipo:"success",texto:t.message}),D(m)}catch(e){console.error("Error guardando asistencias:",e),S({tipo:"error",texto:"Error al guardar las asistencias"})}finally{A(!1)}},B=async()=>{$(!0);try{let e=await o.asistenciasService.getReporte(g,m);R(e)}catch(e){console.error("Error descargando reporte:",e),S({tipo:"error",texto:"Error al generar el reporte"})}finally{$(!1)}},R=e=>{let t=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Reporte de Asistencia - ${e.grupo}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 20px; }
          h1 { text-align: center; color: #333; font-size: 18px; }
          .info { margin-bottom: 20px; }
          .info p { margin: 5px 0; font-size: 12px; }
          .resumen { display: flex; gap: 20px; margin-bottom: 20px; }
          .resumen-item { padding: 10px; background: #f5f5f5; border-radius: 5px; text-align: center; }
          table { width: 100%; border-collapse: collapse; font-size: 11px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background: #f0f0f0; }
          .presente { color: green; }
          .ausente { color: red; }
          .footer { margin-top: 20px; font-size: 10px; color: #666; text-align: center; }
        </style>
      </head>
      <body>
        <h1>${e.titulo}</h1>
        <div class="info">
          <p><strong>Grupo:</strong> ${e.grupo}</p>
          <p><strong>Curso:</strong> ${e.curso}</p>
          <p><strong>Instructor:</strong> ${e.instructor}</p>
          <p><strong>Fecha:</strong> ${e.fecha}</p>
          <p><strong>Horario:</strong> ${e.horario}</p>
        </div>
        <div class="resumen">
          <div class="resumen-item"><strong>Total:</strong> ${e.resumen.total_estudiantes}</div>
          <div class="resumen-item"><strong>Presentes:</strong> ${e.resumen.presentes}</div>
          <div class="resumen-item"><strong>Ausentes:</strong> ${e.resumen.ausentes}</div>
          <div class="resumen-item"><strong>Tardanzas:</strong> ${e.resumen.tardanzas}</div>
        </div>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Nombre</th>
              <th>C\xe9dula</th>
              <th>Estado</th>
              <th>Observaciones</th>
            </tr>
          </thead>
          <tbody>
            ${e.estudiantes.map((e,t)=>`
              <tr>
                <td>${t+1}</td>
                <td>${e.nombre}</td>
                <td>${e.cedula}</td>
                <td class="${"presente"===e.estado.toLowerCase()?"presente":"ausente"===e.estado.toLowerCase()?"ausente":""}">${e.estado}</td>
                <td>${e.observaciones||"-"}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        <div class="footer">
          <p>Generado el ${e.generado_en} por ${e.generado_por}</p>
        </div>
      </body>
      </html>
    `,r=window.open("","_blank");r&&(r.document.write(t),r.document.close(),r.print())};return C?(0,t.jsx)(s.DashboardLayout,{children:(0,t.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,t.jsx)(i.Spinner,{size:"lg"})})}):(0,t.jsx)(s.DashboardLayout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>p.push(`/mis-grupos/${g}`),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(l.ArrowLeftIcon,{className:"h-5 w-5 text-gray-500"})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-50 rounded-lg",children:(0,t.jsx)(c.ClipboardDocumentListIcon,{className:"h-5 w-5 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Registro de Asistencia"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[h?.nombre," • ",h?.curso]})]})]})})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(u.CalendarIcon,{className:"h-5 w-5 text-gray-400"}),(0,t.jsx)("input",{type:"date",value:m,onChange:e=>x(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:y})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Button,{variant:"secondary",size:"sm",onClick:()=>k("presente"),children:"Todos Presentes"}),(0,t.jsx)(n.Button,{variant:"secondary",size:"sm",onClick:()=>k("ausente"),children:"Todos Ausentes"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:O.total}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Total Estudiantes"})]}),(0,t.jsxs)("div",{className:"bg-emerald-50 rounded-xl border border-emerald-100 p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:Object.values(w).filter(e=>"presente"===e.estado).length}),(0,t.jsx)("p",{className:"text-xs text-emerald-600",children:"Presentes"})]}),(0,t.jsxs)("div",{className:"bg-red-50 rounded-xl border border-red-100 p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:Object.values(w).filter(e=>"ausente"===e.estado).length}),(0,t.jsx)("p",{className:"text-xs text-red-600",children:"Ausentes"})]})]}),E&&(0,t.jsx)("div",{className:`p-4 rounded-lg ${"success"===E.tipo?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-700"}`,children:E.texto}),(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 border-b border-gray-100",children:[(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"#"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"Estudiante"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"Cédula"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Estado"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"Observaciones"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-50",children:N.map((e,r)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:r+1}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,t.jsxs)("span",{className:"text-xs font-medium text-green-600",children:[e.deportista.nombres.charAt(0),e.deportista.apellidos.charAt(0)]})}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e.deportista.nombres," ",e.deportista.apellidos]})]})}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.deportista.cedula||"-"}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("div",{className:"flex items-center justify-center gap-1",children:["presente","ausente","tardanza","justificado"].map(r=>(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id_deportista,void j(e=>({...e,[t]:{...e[t],estado:r}}))},className:`px-2 py-1 text-xs rounded-lg border transition-colors ${w[e.id_deportista]?.estado===r?"presente"===r?"bg-emerald-100 border-emerald-300 text-emerald-700":"ausente"===r?"bg-red-100 border-red-300 text-red-700":"tardanza"===r?"bg-amber-100 border-amber-300 text-amber-700":"bg-blue-100 border-blue-300 text-blue-700":"border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:"presente"===r?"P":"ausente"===r?"A":"tardanza"===r?"T":"J"},r))})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("input",{type:"text",value:w[e.id_deportista]?.observaciones||"",onChange:t=>{var r,a;return r=e.id_deportista,a=t.target.value,void j(e=>({...e,[r]:{...e[r],observaciones:a}}))},placeholder:"Observaciones...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-green-500"})})]},e.id_deportista))})]})})}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(n.Button,{variant:"secondary",onClick:B,disabled:P,children:[(0,t.jsx)(d,{className:"h-4 w-4 mr-2"}),P?"Generando...":"Descargar Reporte"]}),(0,t.jsx)(n.Button,{onClick:L,disabled:I,children:I?"Guardando...":"Guardar Asistencia"})]})]})})}e.s(["default",()=>p],48861)}]);