(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58941,e=>{"use strict";var r=e.i(30680);let t=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});e.s(["TrashIcon",0,t],58941)},19926,e=>{"use strict";var r=e.i(30680);let t=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});e.s(["PlusIcon",0,t],19926)},44095,e=>{"use strict";var r=e.i(30680);let t=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))});e.s(["PencilSquareIcon",0,t],44095)},47152,e=>{"use strict";var r=e.i(96564),t=e.i(55528);e.s(["instructoresService",0,{async getAll(e){let{data:s}=await r.apiClient.get(t.API_ENDPOINTS.instructores,e);if(s&&"object"==typeof s&&"success"in s&&s.data){let e=s.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(s)?{data:s,total:s.length,current_page:1,last_page:1,per_page:s.length,from:1,to:s.length}:s},async getDisponibles(){let{data:e}=await r.apiClient.get(`${t.API_ENDPOINTS.instructores}/disponibles/listar`);return e&&"object"==typeof e&&"instructores"in e?e.instructores.map(e=>({id_usuario:e.id_usuario||e.id_instructor||0,nombre:e.nombres||e.nombre||"",apellido:e.apellidos||e.apellido||"",email:e.email||"",especialidad:e.especialidad,status:"activo",id_rol:0,created_at:"",updated_at:""})):e&&"object"==typeof e&&"data"in e?e.data:e}},"rolesService",0,{async getAll(){console.log("Llamando a:",t.API_ENDPOINTS.roles);let{data:e}=await r.apiClient.get(t.API_ENDPOINTS.roles);return console.log("Respuesta roles:",e),Array.isArray(e)?e:e.data},async getById(e){let{data:s}=await r.apiClient.get(`${t.API_ENDPOINTS.roles}/${e}`);return s},async create(e){let{data:s}=await r.apiClient.post(t.API_ENDPOINTS.roles,e);return s.data},async update(e,s){let{data:a}=await r.apiClient.put(`${t.API_ENDPOINTS.roles}/${e}`,s);return a.data},async delete(e){await r.apiClient.delete(`${t.API_ENDPOINTS.roles}/${e}`)}},"usuariosService",0,{async getAll(e){let{data:s}=await r.apiClient.get(t.API_ENDPOINTS.usuarios,e);if(s&&"object"==typeof s&&"success"in s&&s.data){let e=s.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(s)?{data:s,total:s.length,current_page:1,last_page:1,per_page:s.length,from:1,to:s.length}:s},async getById(e){let{data:s}=await r.apiClient.get(`${t.API_ENDPOINTS.usuarios}/${e}`);return s},async create(e){let{data:s}=await r.apiClient.post(t.API_ENDPOINTS.usuarios,e);return s},async update(e,s){let{data:a}=await r.apiClient.put(`${t.API_ENDPOINTS.usuarios}/${e}`,s);return a},async delete(e){await r.apiClient.delete(`${t.API_ENDPOINTS.usuarios}/${e}`)},async cambiarEstado(e,s){let{data:a}=await r.apiClient.put(`${t.API_ENDPOINTS.usuarios}/${e}/estado`,{status:s});return a}}])},40629,e=>{"use strict";var r=e.i(30680);let t=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});e.s(["XMarkIcon",0,t],40629)},97505,e=>{"use strict";var r=e.i(30680);let t=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))});e.s(["CheckIcon",0,t],97505)},87922,e=>{"use strict";var r=e.i(30680);let t=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))});e.s(["ShieldCheckIcon",0,t],87922)},48970,e=>{"use strict";var r=e.i(44472),t=e.i(30680);e.i(51766);var s=e.i(5174),a=e.i(47152),i=e.i(96564);let l={async getAll(e){try{let{data:r}=await i.apiClient.get("/permisos",e);return Array.isArray(r)?r:r.data||[]}catch(e){return console.error("Error obteniendo permisos:",e),[]}},async getModulos(){try{let{data:e}=await i.apiClient.get("/permisos/modulos");return Array.isArray(e)?e:[]}catch(e){return console.error("Error obteniendo módulos:",e),[]}},async create(e){let{data:r}=await i.apiClient.post("/permisos",e);return r.data},async update(e,r){let{data:t}=await i.apiClient.put(`/permisos/${e}`,r);return t.data},async delete(e){await i.apiClient.delete(`/permisos/${e}`)}};e.i(36106);var n=e.i(75227),o=e.i(85547),c=e.i(19926),d=e.i(44095),u=e.i(58941),m=e.i(87922),p=e.i(40629),g=e.i(97505);function x(){let[e,i]=(0,t.useState)([]),[x,h]=(0,t.useState)([]),[y,b]=(0,t.useState)([]),[f,j]=(0,t.useState)(!0),[v,w]=(0,t.useState)(!1),[N,C]=(0,t.useState)(!1),[k,A]=(0,t.useState)(null),[E,I]=(0,t.useState)(!1),[_,S]=(0,t.useState)(!1),[P,O]=(0,t.useState)(null),[L,T]=(0,t.useState)({nombre:"",descripcion:"",permisos:[]});(0,t.useEffect)(()=>{D(),$()},[]);let D=async()=>{try{let e=await a.rolesService.getAll();console.log("Roles cargados:",e),i(Array.isArray(e)?e:[])}catch(e){console.error("Error cargando roles:",e),i([])}finally{j(!1)}},$=async()=>{try{let[e,r]=await Promise.all([l.getAll({per_page:200}),l.getModulos()]);h(e),b(r)}catch(e){console.error("Error cargando permisos:",e),h([]),b([])}},B=async e=>{e.preventDefault(),S(!0);try{P?await a.rolesService.update(P.id_rol,L):await a.rolesService.create(L),w(!1),M(),D()}catch(e){console.error("Error guardando rol:",e)}finally{S(!1)}},R=async()=>{if(k){I(!0);try{await a.rolesService.delete(k),D()}catch(e){console.error("Error:",e)}finally{I(!1),C(!1),A(null)}}},M=()=>{O(null),T({nombre:"",descripcion:"",permisos:[]})};return f?(0,r.jsx)(s.DashboardLayout,{children:(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600"})})}):(0,r.jsx)(s.DashboardLayout,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-green-50 rounded-lg",children:(0,r.jsx)(m.ShieldCheckIcon,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Roles"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.length," registros"]})]})]}),(0,r.jsxs)(n.Button,{size:"sm",onClick:()=>{M(),w(!0)},children:[(0,r.jsx)(c.PlusIcon,{className:"h-4 w-4 mr-1"}),"Nuevo"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center",children:(0,r.jsx)(m.ShieldCheckIcon,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:e.nombre}),e.permisos&&e.permisos.length>0&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.permisos.length," permiso",1!==e.permisos.length?"s":""]})]})]})}),e.descripcion&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:e.descripcion}),e.permisos&&e.permisos.length>0&&(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.permisos.slice(0,3).map(e=>(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-50 text-green-700 rounded",children:e.nombre},e.id_permiso)),e.permisos.length>3&&(0,r.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded",children:["+",e.permisos.length-3," más"]})]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-1 pt-3 border-t border-gray-100",children:[(0,r.jsx)("button",{onClick:()=>{O(e),T({nombre:e.nombre,descripcion:e.descripcion||"",permisos:e.permisos?.map(e=>e.id_permiso)||[]}),w(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,r.jsx)(d.PencilSquareIcon,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>{A(e.id_rol),C(!0)},className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,r.jsx)(u.TrashIcon,{className:"h-4 w-4"})})]})]},e.id_rol))}),v&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 w-full max-w-2xl shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:[P?"Editar":"Nuevo"," Rol"]}),(0,r.jsx)("button",{onClick:()=>w(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg",children:(0,r.jsx)(p.XMarkIcon,{className:"h-5 w-5"})})]}),(0,r.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Nombre"}),(0,r.jsx)("input",{type:"text",value:L.nombre,onChange:e=>T({...L,nombre:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Descripción"}),(0,r.jsx)("textarea",{value:L.descripcion,onChange:e=>T({...L,descripcion:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500",rows:2})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:["Permisos (",L.permisos.length," seleccionados)"]}),(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto",children:y.map(e=>{let t=x.filter(r=>r.modulo===e),s=t.every(e=>L.permisos.includes(e.id_permiso));return(0,r.jsxs)("div",{className:"border-b border-gray-100 last:border-0",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{let r;(r=x.filter(r=>r.modulo===e).map(e=>e.id_permiso)).every(e=>L.permisos.includes(e))?T(e=>({...e,permisos:e.permisos.filter(e=>!r.includes(e))})):T(e=>({...e,permisos:[...new Set([...e.permisos,...r])]}))},className:"w-full px-3 py-2 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:e}),(0,r.jsx)("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${s?"bg-green-600 border-green-600":"border-gray-300"}`,children:s&&(0,r.jsx)(g.CheckIcon,{className:"h-3 w-3 text-white"})})]}),(0,r.jsx)("div",{className:"px-6 pb-2 space-y-1",children:t.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:L.permisos.includes(e.id_permiso),onChange:()=>{var r;return r=e.id_permiso,void T(e=>({...e,permisos:e.permisos.includes(r)?e.permisos.filter(e=>e!==r):[...e.permisos,r]}))},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("span",{className:"text-xs text-gray-700",children:e.nombre}),e.descripcion&&(0,r.jsx)("p",{className:"text-xs text-gray-400",children:e.descripcion})]})]},e.id_permiso))})]},e)})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,r.jsx)(n.Button,{type:"button",variant:"secondary",size:"sm",onClick:()=>w(!1),disabled:_,children:"Cancelar"}),(0,r.jsx)(n.Button,{type:"submit",size:"sm",disabled:_,children:_?"Guardando...":P?"Actualizar":"Crear"})]})]})]})}),(0,r.jsx)(o.ConfirmModal,{isOpen:N,onClose:()=>C(!1),onConfirm:R,title:"¿Eliminar rol?",message:"Esta acción no se puede deshacer.",isLoading:E})]})})}e.s(["default",()=>x],48970)}]);