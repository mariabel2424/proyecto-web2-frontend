(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96564,55528,t=>{"use strict";let e=t.i(56146).default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api";t.s(["API_BASE_URL",0,e,"API_ENDPOINTS",0,{auth:{login:"/auth/login",register:"/register",logout:"/auth/logout",me:"/auth/me",cambiarPassword:"/auth/cambiar-password",verificarEmail:"/auth/verificar-email",enviarCodigo:"/auth/enviar-codigo",verificarCodigo:"/auth/verificar-codigo",solicitarReset:"/auth/solicitar-reset",verificarToken:"/auth/verificar-token"},dashboard:{estadisticas:"/dashboard/estadisticas",cursosActivos:"/dashboard/cursos-activos",inscripcionesRecientes:"/dashboard/inscripciones-recientes",facturacionMensual:"/dashboard/facturacion-mensual",misDatos:"/dashboard/mis-datos",participantes:"/dashboard/participantes"},usuarios:"/usuarios",roles:"/rols",cursos:"/cursos",cursosAbiertos:"/cursos-abiertos",gruposCurso:"/grupos-curso",gruposPublico:"/cursos",inscripcionesCurso:"/inscripciones-curso",deportistas:"/deportistas",misParticipantes:"/mis-participantes",categorias:"/categorias",tutores:"/tutores",instructores:"/instructores",facturas:"/facturas",pagos:"/pagos",misPagos:"/mis-pagos",misFacturas:"/mis-facturas",misInscripciones:"/mis-inscripciones",configuraciones:"/configuraciones"}],55528);class a extends Error{status;data;errors;constructor(t,e,a){super(t),this.name="ApiError",this.status=e,this.data=a,a&&"object"==typeof a&&"errors"in a&&(this.errors=a.errors)}}let r=new class{baseUrl;constructor(t){this.baseUrl=t}getToken(){return localStorage.getItem("auth_token")}buildUrl(t,e){let a=new URL(`${this.baseUrl}${t}`);return e&&Object.entries(e).forEach(([t,e])=>{void 0!==e&&a.searchParams.append(t,String(e))}),a.toString()}async request(t,e={}){let{method:r="GET",body:s,headers:i={},params:o}=e,n=this.getToken(),u={"Content-Type":"application/json",Accept:"application/json",...i};n&&(u.Authorization=`Bearer ${n}`);let c={method:r,headers:u,credentials:"include"};s&&"GET"!==r&&(c.body=JSON.stringify(s));let l=await fetch(this.buildUrl(t,o),c),h=await l.json();if(!l.ok)throw new a(h.message||"Error en la petición",l.status,h);return{data:h,status:l.status}}get(t,e){return this.request(t,{method:"GET",params:e})}post(t,e){return this.request(t,{method:"POST",body:e})}put(t,e){return this.request(t,{method:"PUT",body:e})}patch(t,e){return this.request(t,{method:"PATCH",body:e})}delete(t){return this.request(t,{method:"DELETE"})}}(e);t.s(["apiClient",0,r],96564)},17097,t=>{"use strict";var e=t.i(96564),a=t.i(55528);t.s(["authService",0,{async login(t){let{data:r}=await e.apiClient.post(a.API_ENDPOINTS.auth.login,t);return r.token&&localStorage.setItem("auth_token",r.token),r},async register(t){let{data:r}=await e.apiClient.post(a.API_ENDPOINTS.auth.register,t);return r.token&&localStorage.setItem("auth_token",r.token),r},async logout(){try{await e.apiClient.post(a.API_ENDPOINTS.auth.logout)}finally{localStorage.removeItem("auth_token")}},async getMe(){let{data:t}=await e.apiClient.get(a.API_ENDPOINTS.auth.me);return t.user},async cambiarPassword(t,r,s){await e.apiClient.post(a.API_ENDPOINTS.auth.cambiarPassword,{password_actual:t,password_nuevo:r,password_nuevo_confirmation:s})},async verificarEmail(t){let{data:r}=await e.apiClient.post(a.API_ENDPOINTS.auth.verificarEmail,{email:t});return r},async enviarCodigo(t){await e.apiClient.post(a.API_ENDPOINTS.auth.enviarCodigo,{email:t})},async verificarCodigo(t,r){let{data:s}=await e.apiClient.post(a.API_ENDPOINTS.auth.verificarCodigo,{email:t,codigo:r});return s},async solicitarReset(t){await e.apiClient.post(a.API_ENDPOINTS.auth.solicitarReset,{email:t})},async verificarToken(t){let{data:r}=await e.apiClient.post(a.API_ENDPOINTS.auth.verificarToken,{token:t});return r},isAuthenticated:()=>!!localStorage.getItem("auth_token")}])},94789,t=>{"use strict";var e=t.i(30680),a=t.i(17097);let r=(0,e.createContext)(void 0);function s({children:t}){let[s,i]=(0,e.useState)(null),[o,n]=(0,e.useState)(!0),u=(0,e.useCallback)(async()=>{try{if(a.authService.isAuthenticated()){let t=await a.authService.getMe();console.log("Usuario cargado:",t),console.log("Rol del usuario:",t?.rol),i(t)}else console.log("No hay token de autenticación"),i(null)}catch(t){console.error("Error al cargar usuario:",t),localStorage.removeItem("auth_token"),i(null)}finally{n(!1)}},[]);(0,e.useEffect)(()=>{u()},[u]);let c=async t=>{i((await a.authService.login(t)).user)},l=async t=>{i((await a.authService.register(t)).user)},h=async()=>{try{await a.authService.logout()}catch{localStorage.removeItem("auth_token")}i(null)};return e.default.createElement(r.Provider,{value:{user:s,isLoading:o,isAuthenticated:!!s,login:c,register:l,logout:h,refreshUser:u}},t)}function i(){let t=(0,e.useContext)(r);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}t.s(["AuthProvider",()=>s,"useAuth",()=>i])},37358,t=>{"use strict";var e=t.i(44472),a=t.i(94789);function r({children:t}){return(0,e.jsx)(a.AuthProvider,{children:t})}t.s(["Providers",()=>r])}]);