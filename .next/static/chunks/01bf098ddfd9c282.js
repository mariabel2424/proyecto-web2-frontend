(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47152,e=>{"use strict";var a=e.i(96564),t=e.i(55528);e.s(["instructoresService",0,{async getAll(e){let{data:r}=await a.apiClient.get(t.API_ENDPOINTS.instructores,e);if(r&&"object"==typeof r&&"success"in r&&r.data){let e=r.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(r)?{data:r,total:r.length,current_page:1,last_page:1,per_page:r.length,from:1,to:r.length}:r},async getDisponibles(){let{data:e}=await a.apiClient.get(`${t.API_ENDPOINTS.instructores}/disponibles/listar`);return e&&"object"==typeof e&&"instructores"in e?e.instructores.map(e=>({id_usuario:e.id_usuario||e.id_instructor||0,nombre:e.nombres||e.nombre||"",apellido:e.apellidos||e.apellido||"",email:e.email||"",especialidad:e.especialidad,status:"activo",id_rol:0,created_at:"",updated_at:""})):e&&"object"==typeof e&&"data"in e?e.data:e}},"rolesService",0,{async getAll(){console.log("Llamando a:",t.API_ENDPOINTS.roles);let{data:e}=await a.apiClient.get(t.API_ENDPOINTS.roles);return console.log("Respuesta roles:",e),Array.isArray(e)?e:e.data},async getById(e){let{data:r}=await a.apiClient.get(`${t.API_ENDPOINTS.roles}/${e}`);return r},async create(e){let{data:r}=await a.apiClient.post(t.API_ENDPOINTS.roles,e);return r.data},async update(e,r){let{data:s}=await a.apiClient.put(`${t.API_ENDPOINTS.roles}/${e}`,r);return s.data},async delete(e){await a.apiClient.delete(`${t.API_ENDPOINTS.roles}/${e}`)}},"usuariosService",0,{async getAll(e){let{data:r}=await a.apiClient.get(t.API_ENDPOINTS.usuarios,e);if(r&&"object"==typeof r&&"success"in r&&r.data){let e=r.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(r)?{data:r,total:r.length,current_page:1,last_page:1,per_page:r.length,from:1,to:r.length}:r},async getById(e){let{data:r}=await a.apiClient.get(`${t.API_ENDPOINTS.usuarios}/${e}`);return r},async create(e){let{data:r}=await a.apiClient.post(t.API_ENDPOINTS.usuarios,e);return r},async update(e,r){let{data:s}=await a.apiClient.put(`${t.API_ENDPOINTS.usuarios}/${e}`,r);return s},async delete(e){await a.apiClient.delete(`${t.API_ENDPOINTS.usuarios}/${e}`)},async cambiarEstado(e,r){let{data:s}=await a.apiClient.put(`${t.API_ENDPOINTS.usuarios}/${e}/estado`,{status:r});return s}}])},14867,e=>{"use strict";var a=e.i(96564),t=e.i(55528);e.s(["facturasService",0,{async getAll(e){let{data:r}=await a.apiClient.get(t.API_ENDPOINTS.facturas,e);if(r&&"object"==typeof r&&"success"in r&&r.data){let e=r.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(r)?{data:r,total:r.length,current_page:1,last_page:1,per_page:r.length,from:1,to:r.length}:r},async getById(e){let{data:r}=await a.apiClient.get(`${t.API_ENDPOINTS.facturas}/${e}`);return r},async create(e){let{data:r}=await a.apiClient.post(t.API_ENDPOINTS.facturas,e);return r},async update(e,r){let{data:s}=await a.apiClient.put(`${t.API_ENDPOINTS.facturas}/${e}`,r);return s},async delete(e){await a.apiClient.delete(`${t.API_ENDPOINTS.facturas}/${e}`)},async cambiarEstado(e,r){let{data:s}=await a.apiClient.put(`${t.API_ENDPOINTS.facturas}/${e}`,{estado:r});return s},async registrarPago(e,r){let{data:s}=await a.apiClient.post(`${t.API_ENDPOINTS.facturas}/${e}/registrar-pago`,r);return s},async generarDesdeInscripcion(e,r){let{data:s}=await a.apiClient.post(`${t.API_ENDPOINTS.facturas}/generar-desde-inscripcion/${e}`,{id_tutor:r});return s},async getFacturasPorTutor(e){let{data:r}=await a.apiClient.get(`${t.API_ENDPOINTS.facturas}/tutor/${e}`);return r},async getReporteFacturacion(e){let{data:r}=await a.apiClient.get(`${t.API_ENDPOINTS.facturas}/reporte/facturacion`,e);return r},async getDatosParaPdf(e){let{data:r}=await a.apiClient.get(`${t.API_ENDPOINTS.facturas}/${e}/pdf`);return r}},"pagosService",0,{async getAll(e){let{data:r}=await a.apiClient.get(t.API_ENDPOINTS.pagos,e);if(r&&"object"==typeof r&&"success"in r&&r.data){let e=r.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(r)?{data:r,total:r.length,current_page:1,last_page:1,per_page:r.length,from:1,to:r.length}:r},async getById(e){let{data:r}=await a.apiClient.get(`${t.API_ENDPOINTS.pagos}/${e}`);return r},async update(e,r){let{data:s}=await a.apiClient.put(`${t.API_ENDPOINTS.pagos}/${e}`,r);return s},async delete(e){await a.apiClient.delete(`${t.API_ENDPOINTS.pagos}/${e}`)},async verificar(e){let{data:r}=await a.apiClient.post(`${t.API_ENDPOINTS.pagos}/${e}/verificar`);return r},async rechazar(e,r){let{data:s}=await a.apiClient.post(`${t.API_ENDPOINTS.pagos}/${e}/rechazar`,{motivo:r});return s}}])},96431,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))});e.s(["FunnelIcon",0,t],96431)},82785,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});e.s(["EyeIcon",0,t],82785)},58941,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});e.s(["TrashIcon",0,t],58941)},19926,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});e.s(["PlusIcon",0,t],19926)},44095,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))});e.s(["PencilSquareIcon",0,t],44095)},89782,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});e.s(["MagnifyingGlassIcon",0,t],89782)},82464,e=>{"use strict";var a=e.i(30680);function t(e,r={}){let{initialPage:s=1,initialPerPage:o=10}=r,[i,n]=(0,a.useState)([]),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[p,m]=(0,a.useState)(s),[g,x]=(0,a.useState)(o),[h,b]=(0,a.useState)(0),[f,y]=(0,a.useState)(1),[v,N]=(0,a.useState)(""),[j,w]=(0,a.useState)(),[_,C]=(0,a.useState)("asc"),P=(0,a.useCallback)(async()=>{c(!0),u(null);try{let a=await e({page:p,per_page:g,search:v||void 0,sort_by:j,sort_order:_});n(Array.isArray(a.data)?a.data:[]),b(a.total||0),y(a.last_page||1)}catch(e){u(e instanceof Error?e.message:"Error al cargar datos"),n([])}finally{c(!1)}},[e,p,g,v,j,_]);(0,a.useEffect)(()=>{P()},[P]);let k=(0,a.useCallback)(e=>{m(Math.max(1,Math.min(e,f)))},[f]),E=(0,a.useCallback)(()=>{p<f&&m(e=>e+1)},[p,f]),I=(0,a.useCallback)(()=>{p>1&&m(e=>e-1)},[p]),A=(0,a.useCallback)(e=>{x(e),m(1)},[]),S=(0,a.useCallback)(e=>{N(e),m(1)},[]),$=(0,a.useCallback)(e=>{j===e?C(e=>"asc"===e?"desc":"asc"):(w(e),C("asc")),m(1)},[j]);return{data:i,isLoading:l,error:d,page:p,perPage:g,total:h,lastPage:f,search:v,sortBy:j,sortOrder:_,goToPage:k,nextPage:E,prevPage:I,changePerPage:A,handleSearch:S,handleSort:$,refetch:P}}e.s(["usePagination",()=>t])},96331,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))});e.s(["CreditCardIcon",0,t],96331)},70563,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});e.s(["PhotoIcon",0,t],70563)},21794,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});e.s(["DocumentTextIcon",0,t],21794)},71918,e=>{"use strict";var a=e.i(30680);let t=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))});e.s(["ArrowDownTrayIcon",0,t],71918)},9106,e=>{"use strict";var a=e.i(44472),t=e.i(30680);e.i(51766);var r=e.i(5174);e.i(36106);var s=e.i(75227),o=e.i(4299),i=e.i(99375),n=e.i(94460),l=e.i(85547),c=e.i(82464),d=e.i(14867),u=e.i(47152),p=e.i(19926),m=e.i(89782),g=e.i(82785),x=e.i(44095),h=e.i(58941),b=e.i(21794),f=e.i(96331),y=e.i(96431),v=e.i(71918),N=e.i(70563);function j(){let e,j,w,_,C,P,k,[E,I]=(0,t.useState)([]),[A,S]=(0,t.useState)(!1),[$,D]=(0,t.useState)(!1),[T,O]=(0,t.useState)(!1),[z,F]=(0,t.useState)(!1),[L,B]=(0,t.useState)(null),[M,R]=(0,t.useState)(null),[V,Z]=(0,t.useState)(null),[W,q]=(0,t.useState)(!1),[H,G]=(0,t.useState)(!1),[U,K]=(0,t.useState)(!1),[Y,J]=(0,t.useState)({estado:""}),[Q,X]=(0,t.useState)(!1),[ee,ea]=(0,t.useState)({numero_factura:"",concepto:"",id_tutor:"",id_deportista:"",subtotal:"",descuento:"",impuesto:"",fecha_emision:"",fecha_vencimiento:"",detalles:[]});(0,t.useEffect)(()=>{u.usuariosService.getAll({per_page:1e3,rol:"tutor"}).then(e=>{let a=[];e?.data&&Array.isArray(e.data)?a=e.data:Array.isArray(e)&&(a=e),I(a)}).catch(e=>{console.error("Error cargando tutores:",e),I([])})},[]);let et=(0,t.useCallback)(e=>d.facturasService.getAll({...e,...Y}),[Y]),{data:er,isLoading:es,page:eo,perPage:ei,total:en,lastPage:el,search:ec,sortBy:ed,sortOrder:eu,goToPage:ep,changePerPage:em,handleSearch:eg,handleSort:ex,refetch:eh}=(0,c.usePagination)(et);er.reduce((e,a)=>e+Number(a.total||0),0),er.filter(e=>"pagada"===e.estado).reduce((e,a)=>e+Number(a.total||0),0),er.filter(e=>"pendiente"===e.estado).reduce((e,a)=>e+Number(a.total||0),0),er.filter(e=>"vencida"===e.estado).reduce((e,a)=>e+Number(a.total||0),0);let eb=async e=>{if("pendiente"===e.estado)try{await d.facturasService.cambiarEstado(e.id_factura,"pagada"),eh()}catch(e){console.error("Error al marcar como pagada:",e)}},ef=async(e,a,t,r,s)=>{if(confirm("¿Aprobar este pago y marcar la factura como pagada?")){K(!0);try{await d.facturasService.registrarPago(e,{monto:a,fecha_pago:new Date().toISOString().split("T")[0],metodo_pago:t,referencia:r||void 0,observaciones:s?`Comprobante: ${s}`:void 0}),S(!1),eh(),alert("Pago aprobado exitosamente")}catch(e){console.error("Error al aprobar pago:",e),alert(e.message||"Error al aprobar el pago")}finally{K(!1)}}},ey=async e=>{let a=prompt("Ingrese el motivo del rechazo (se notificará al usuario):");if(a){K(!0);try{await d.facturasService.update(e,{observaciones:`Pago rechazado: ${a}`}),alert("Pago rechazado. Se notificará al usuario."),S(!1),eh()}catch(e){console.error("Error al rechazar pago:",e),alert(e.message||"Error al rechazar el pago")}finally{K(!1)}}},ev=async e=>{if(confirm("¿Verificar este pago?")){K(!0);try{await d.pagosService.verificar(e),S(!1),eh(),alert("Pago verificado exitosamente")}catch(e){console.error("Error al verificar pago:",e),alert(e.message||"Error al verificar el pago")}finally{K(!1)}}},eN=async e=>{let a=prompt("Ingrese el motivo del rechazo:");if(a){K(!0);try{await d.pagosService.rechazar(e,a),alert("Pago rechazado."),S(!1),eh()}catch(e){console.error("Error al rechazar pago:",e),alert(e.message||"Error al rechazar el pago")}finally{K(!1)}}},ej=e=>{let a=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>Factura ${e.numero_factura||e.id_factura}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; color: #333; }
          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #4f46e5; padding-bottom: 20px; }
          .header h1 { color: #4f46e5; margin: 0; font-size: 28px; }
          .header p { margin: 5px 0; color: #666; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
          .info-box { background: #f9fafb; padding: 15px; border-radius: 8px; }
          .info-box h3 { margin: 0 0 10px 0; font-size: 14px; color: #6b7280; text-transform: uppercase; }
          .info-box p { margin: 5px 0; font-size: 14px; }
          .estado { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
          .estado-pagada { background: #d1fae5; color: #065f46; }
          .estado-pendiente { background: #fef3c7; color: #92400e; }
          .estado-vencida { background: #fee2e2; color: #991b1b; }
          .totales { margin-top: 30px; border-top: 1px solid #e5e7eb; padding-top: 20px; }
          .total-row { display: flex; justify-content: space-between; padding: 8px 0; font-size: 14px; }
          .total-row.final { font-size: 18px; font-weight: bold; border-top: 2px solid #333; margin-top: 10px; padding-top: 15px; }
          .footer { margin-top: 40px; text-align: center; font-size: 12px; color: #9ca3af; }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>FACTURA</h1>
          <p><strong>N\xb0 ${e.numero_factura||"FAC-"+e.id_factura}</strong></p>
          <p>Cursos Vacacionales</p>
        </div>
        
        <div class="info-grid">
          <div class="info-box">
            <h3>Datos del Cliente</h3>
            <p><strong>${e.tutor?`${e.tutor.nombre} ${e.tutor.apellido}`:e.usuario?.nombre||"N/A"}</strong></p>
            <p>${e.tutor?.email||e.usuario?.email||""}</p>
          </div>
          <div class="info-box">
            <h3>Datos de la Factura</h3>
            <p><strong>Fecha:</strong> ${e.fecha_emision||"N/A"}</p>
            <p><strong>Vencimiento:</strong> ${e.fecha_vencimiento||"N/A"}</p>
            <p><strong>Estado:</strong> <span class="estado estado-${e.estado}">${e.estado?.toUpperCase()}</span></p>
          </div>
        </div>

        <div class="info-box">
          <h3>Concepto</h3>
          <p>${e.concepto||"Inscripción a curso vacacional"}</p>
        </div>

        <div class="totales">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>$${Number(e.subtotal||0).toFixed(2)}</span>
          </div>
          ${e.descuento?`
          <div class="total-row" style="color: #059669;">
            <span>Descuento:</span>
            <span>-$${Number(e.descuento).toFixed(2)}</span>
          </div>
          `:""}
          ${e.impuesto?`
          <div class="total-row">
            <span>Impuesto:</span>
            <span>$${Number(e.impuesto).toFixed(2)}</span>
          </div>
          `:""}
          <div class="total-row final">
            <span>TOTAL:</span>
            <span>$${Number(e.total||0).toFixed(2)}</span>
          </div>
        </div>

        <div class="footer">
          <p>Gracias por su preferencia</p>
          <p>Documento generado el ${new Date().toLocaleDateString("es-EC",{timeZone:"America/Guayaquil"})}</p>
        </div>
      </body>
      </html>
    `,t=window.open("","_blank");t&&(t.document.write(a),t.document.close(),t.print())},ew=async()=>{if(V){q(!0);try{await d.facturasService.delete(V),eh()}catch(e){console.error("Error:",e)}finally{q(!1),O(!1),Z(null)}}},e_=()=>{R(null),ea({numero_factura:"",concepto:"",id_tutor:"",id_deportista:"",subtotal:"",descuento:"",impuesto:"",fecha_emision:"",fecha_vencimiento:"",detalles:[]})},eC=async e=>{e.preventDefault();try{let e={numero_factura:ee.numero_factura,concepto:ee.concepto,id_tutor:ee.id_tutor?Number(ee.id_tutor):void 0,subtotal:Number(ee.subtotal),descuento:ee.descuento?Number(ee.descuento):0,impuesto:ee.impuesto?Number(ee.impuesto):0,fecha_emision:ee.fecha_emision,fecha_vencimiento:ee.fecha_vencimiento};M?await d.facturasService.update(M.id_factura,e):await d.facturasService.create(e),D(!1),e_(),eh()}catch(e){console.error("Error:",e)}},eP=[{key:"numero_factura",header:"Número",sortable:!0,render:e=>(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.numero_factura})},{key:"cliente",header:"Cliente",render:e=>(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.tutor?`${e.tutor.nombre} ${e.tutor.apellido}`:e.usuario?.nombre||"-"})},{key:"concepto",header:"Concepto",render:e=>(0,a.jsx)("span",{className:"text-sm text-gray-600 line-clamp-1",children:e.concepto})},{key:"total",header:"Total",sortable:!0,render:e=>(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",Number(e.total||0).toFixed(2)]})},{key:"fecha_emision",header:"Fecha",sortable:!0,render:e=>(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.fecha_emision})},{key:"estado",header:"Estado",render:e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"pagada"===e.estado?"bg-emerald-50 text-emerald-600":"pendiente"===e.estado?"bg-amber-50 text-amber-600":"bg-red-50 text-red-600"}`,children:"pagada"===e.estado?"Pagada":"pendiente"===e.estado?"Pendiente":"Vencida"}),"pendiente"===e.estado&&e.pagos&&e.pagos.length>0&&e.pagos.some(e=>"pendiente"===e.estado&&e.comprobante)&&(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500",title:"Comprobante pendiente de revisión"})]})]})},{key:"acciones",header:"",render:e=>(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,a.jsx)("button",{onClick:()=>{B(e),S(!0)},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Ver detalle",children:(0,a.jsx)(g.EyeIcon,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>ej(e),className:"p-1.5 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Descargar PDF",children:(0,a.jsx)(v.ArrowDownTrayIcon,{className:"h-4 w-4"})}),"pendiente"===e.estado&&(0,a.jsx)("button",{onClick:()=>eb(e),title:"Marcar como pagada",className:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",children:(0,a.jsx)(f.CreditCardIcon,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>{R(e),ea({numero_factura:e.numero_factura||"",concepto:e.concepto||"",id_tutor:e.id_tutor?.toString()||"",id_deportista:e.id_deportista?.toString()||"",subtotal:e.subtotal?.toString()||"",descuento:e.descuento?.toString()||"",impuesto:e.impuesto?.toString()||"",fecha_emision:e.fecha_emision||"",fecha_vencimiento:e.fecha_vencimiento||"",detalles:[]}),D(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar",children:(0,a.jsx)(x.PencilSquareIcon,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>{Z(e.id_factura),O(!0)},className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:(0,a.jsx)(h.TrashIcon,{className:"h-4 w-4"})})]})}];return(0,a.jsx)(r.DashboardLayout,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg",children:(0,a.jsx)(b.DocumentTextIcon,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Facturas"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[en," registros"]})]})]}),(0,a.jsxs)(s.Button,{size:"sm",onClick:()=>{e_(),D(!0)},children:[(0,a.jsx)(p.PlusIcon,{className:"h-4 w-4 mr-1"}),"Nueva"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Total Facturado"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["$",er.reduce((e,a)=>e+Number(a.total||0),0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Pagadas"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-emerald-600",children:["$",er.filter(e=>"pagada"===e.estado).reduce((e,a)=>e+Number(a.total||0),0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Pendientes"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-amber-600",children:["$",er.filter(e=>"pendiente"===e.estado).reduce((e,a)=>e+Number(a.total||0),0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Vencidas"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-red-600",children:["$",er.filter(e=>"vencida"===e.estado).reduce((e,a)=>e+Number(a.total||0),0).toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-3",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(m.MagnifyingGlassIcon,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar factura...",value:ec,onChange:e=>eg(e.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),(0,a.jsxs)("button",{onClick:()=>X(!Q),className:`px-3 py-2 text-sm border rounded-lg flex items-center gap-2 transition-colors ${Q?"bg-blue-50 border-blue-200 text-blue-600":"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[(0,a.jsx)(y.FunnelIcon,{className:"h-4 w-4"}),"Filtros"]})]}),Q&&(0,a.jsxs)("div",{className:"flex gap-3 mt-3 pt-3 border-t border-gray-100",children:[(0,a.jsxs)("select",{value:Y.estado,onChange:e=>J({...Y,estado:e.target.value}),className:"px-3 py-2 text-sm border border-gray-200 rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"Todos los estados"}),(0,a.jsx)("option",{value:"pagada",children:"Pagada"}),(0,a.jsx)("option",{value:"pendiente",children:"Pendiente"}),(0,a.jsx)("option",{value:"vencida",children:"Vencida"})]}),(0,a.jsx)("button",{onClick:()=>J({estado:""}),className:"text-sm text-gray-500 hover:text-gray-700",children:"Limpiar"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden",children:[(0,a.jsx)(o.Table,{columns:eP,data:er,keyExtractor:e=>e.id_factura,isLoading:es,onSort:ex,sortBy:ed,sortOrder:eu}),(0,a.jsx)("div",{className:"border-t border-gray-100",children:(0,a.jsx)(i.Pagination,{page:eo,lastPage:el,total:en,perPage:ei,onPageChange:ep,onPerPageChange:em})})]}),(0,a.jsx)(n.Modal,{isOpen:A,onClose:()=>S(!1),title:`Factura ${L?.numero_factura}`,size:"lg",children:L&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Cliente"}),(0,a.jsx)("p",{className:"text-gray-900",children:L.tutor?`${L.tutor.nombre} ${L.tutor.apellido}`:L.usuario?.nombre||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Estado"}),(0,a.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"pagada"===L.estado?"bg-emerald-50 text-emerald-600":"pendiente"===L.estado?"bg-amber-50 text-amber-600":"bg-red-50 text-red-600"}`,children:"pagada"===L.estado?"Pagada":"pendiente"===L.estado?"Pendiente":"Vencida"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Fecha Emisión"}),(0,a.jsx)("p",{className:"text-gray-900",children:L.fecha_emision})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Fecha Vencimiento"}),(0,a.jsx)("p",{className:"text-gray-900",children:L.fecha_vencimiento||"-"})]})]}),L.inscripcion?.observaciones&&L.inscripcion.observaciones.includes("Comprobante:")&&"pendiente"===L.estado&&(!L.pagos||0===L.pagos.length)&&(0,a.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-800",children:[(0,a.jsx)(N.PhotoIcon,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Comprobante de Pago Pendiente de Aprobación"})]}),(j=(e=L.inscripcion.observaciones).match(/Comprobante:\s*(\S+)/),w=e.match(/Método:\s*([^-]+)/),_=e.match(/Ref:\s*([^-]+)/),C=j?.[1],P=w?.[1]?.trim(),k=_?.[1]?.trim(),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Monto:"}),(0,a.jsxs)("p",{className:"font-medium",children:["$",Number(L.total||0).toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Método:"}),(0,a.jsx)("p",{className:"font-medium capitalize",children:P||"No especificado"})]}),k&&"N/A"!==k&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Referencia:"}),(0,a.jsx)("p",{className:"font-medium",children:k})]})]}),C&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 block mb-2",children:"Comprobante adjunto:"}),(0,a.jsxs)("div",{className:"relative border-2 border-amber-300 rounded-lg overflow-hidden bg-white",children:[(0,a.jsx)("img",{src:C,alt:"Comprobante de pago",className:"w-full h-64 object-contain cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(C,"_blank")}),(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)("button",{onClick:()=>window.open(C,"_blank"),className:"p-2 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",title:"Ver en tamaño completo",children:(0,a.jsx)(N.PhotoIcon,{className:"h-5 w-5 text-gray-600"})})})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2 border-t border-amber-200",children:[(0,a.jsx)(s.Button,{size:"sm",onClick:()=>ef(L.id_factura,L.total,P||"transferencia",k,C),disabled:U,className:"flex-1",children:U?"Aprobando...":"Aprobar Pago"}),(0,a.jsx)(s.Button,{size:"sm",variant:"secondary",onClick:()=>ey(L.id_factura),disabled:U,className:"flex-1 bg-red-50 text-red-600 hover:bg-red-100",children:"Rechazar"})]})]}))]})}),L.pagos&&L.pagos.length>0&&(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-2",children:"Comprobante de Pago"}),L.pagos.map(e=>(0,a.jsxs)("div",{className:"space-y-3",children:[e.comprobante&&(0,a.jsxs)("div",{className:"relative border rounded-lg overflow-hidden bg-gray-50",children:[(0,a.jsx)("img",{src:e.comprobante,alt:"Comprobante de pago",className:"w-full h-64 object-contain cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(e.comprobante,"_blank")}),(0,a.jsx)("div",{className:"p-3 bg-white border-t",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Método:"})," ",e.metodo_pago]}),e.referencia&&(0,a.jsxs)("p",{className:"text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Ref:"})," ",e.referencia]}),(0,a.jsxs)("p",{className:"text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Monto:"})," $",Number(e.monto).toFixed(2)]})]}),(0,a.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"verificado"===e.estado?"bg-emerald-50 text-emerald-600":"rechazado"===e.estado?"bg-red-50 text-red-600":"bg-amber-50 text-amber-600"}`,children:"verificado"===e.estado?"Verificado":"rechazado"===e.estado?"Rechazado":"Pendiente"})]})})]}),e.observaciones&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Observaciones"}),(0,a.jsx)("p",{className:"text-gray-600",children:e.observaciones})]})]},e.id_pago))]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"Concepto"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:L.concepto})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-100 space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Subtotal"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["$",Number(L.subtotal||0).toFixed(2)]})]}),L.descuento&&(0,a.jsxs)("div",{className:"flex justify-between text-emerald-600",children:[(0,a.jsx)("span",{children:"Descuento"}),(0,a.jsxs)("span",{children:["-$",Number(L.descuento||0).toFixed(2)]})]}),L.impuesto&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Impuesto"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["$",Number(L.impuesto||0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold text-base pt-2 border-t border-gray-100",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["$",Number(L.total||0).toFixed(2)]})]})]}),L.pagos&&L.pagos.length>0&&(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-3 font-medium",children:"Pagos Registrados"}),(0,a.jsx)("div",{className:"space-y-3",children:L.pagos.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Monto"}),(0,a.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",Number(e.monto||0).toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Fecha"}),(0,a.jsx)("p",{className:"text-gray-900",children:e.fecha_pago})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Método"}),(0,a.jsx)("p",{className:"text-gray-900 capitalize",children:e.metodo_pago})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Estado"}),(0,a.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"verificado"===e.estado?"bg-emerald-50 text-emerald-600":"pendiente"===e.estado?"bg-amber-50 text-amber-600":"bg-red-50 text-red-600"}`,children:"verificado"===e.estado?"Verificado":"pendiente"===e.estado?"Pendiente":"Rechazado"})]})]}),e.referencia&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Referencia"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.referencia})]}),e.comprobante&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-2",children:"Comprobante"}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e.comprobante,alt:"Comprobante de pago",className:"w-full h-48 object-contain bg-white border border-gray-200 rounded-lg cursor-pointer hover:border-blue-400 transition-colors",onClick:()=>window.open(e.comprobante,"_blank")}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 rounded-lg transition-all flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100 text-sm font-medium",children:"Click para ampliar"})})]})]}),e.observaciones&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Observaciones"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.observaciones})]}),"pendiente"===e.estado&&(0,a.jsxs)("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[(0,a.jsx)(s.Button,{size:"sm",variant:"secondary",onClick:()=>eN(e.id_pago),disabled:U,className:"flex-1 bg-red-50 text-red-600 hover:bg-red-100",children:"Rechazar"}),(0,a.jsx)(s.Button,{size:"sm",onClick:()=>ev(e.id_pago),disabled:U,className:"flex-1",children:U?"Verificando...":"Verificar Pago"})]})]},e.id_pago))})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-100 flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex gap-2",children:"pendiente"===L.estado&&L.pagos&&L.pagos.length>0&&L.pagos.some(e=>"pendiente"===e.estado)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Button,{size:"sm",variant:"secondary",onClick:()=>{let e=L.pagos?.find(e=>"pendiente"===e.estado);e&&eN(e.id_pago)},disabled:U,className:"bg-red-50 text-red-600 hover:bg-red-100 border-red-200",children:"Rechazar Pago"}),(0,a.jsx)(s.Button,{size:"sm",onClick:()=>{let e=L.pagos?.find(e=>"pendiente"===e.estado);e&&ev(e.id_pago)},disabled:U,className:"bg-emerald-600 hover:bg-emerald-700",children:U?"Procesando...":"Aprobar Pago"})]})}),(0,a.jsxs)(s.Button,{size:"sm",variant:"secondary",onClick:()=>ej(L),children:[(0,a.jsx)(v.ArrowDownTrayIcon,{className:"h-4 w-4 mr-1"}),"Descargar PDF"]})]})]})}),(0,a.jsx)(n.Modal,{isOpen:$,onClose:()=>D(!1),title:`${M?"Editar":"Nueva"} Factura`,size:"md",children:(0,a.jsxs)("form",{onSubmit:eC,className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Número de Factura"}),(0,a.jsx)("input",{type:"text",value:ee.numero_factura,onChange:e=>ea({...ee,numero_factura:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Cliente (Tutor)"}),(0,a.jsxs)("select",{value:ee.id_tutor,onChange:e=>ea({...ee,id_tutor:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"Seleccionar"}),E.map(e=>(0,a.jsxs)("option",{value:e.id_usuario,children:[e.nombre," ",e.apellido]},e.id_usuario))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Concepto"}),(0,a.jsx)("input",{type:"text",value:ee.concepto,onChange:e=>ea({...ee,concepto:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Subtotal"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:ee.subtotal,onChange:e=>ea({...ee,subtotal:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Descuento"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:ee.descuento,onChange:e=>ea({...ee,descuento:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Impuesto"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:ee.impuesto,onChange:e=>ea({...ee,impuesto:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Fecha Emisión"}),(0,a.jsx)("input",{type:"date",value:ee.fecha_emision,onChange:e=>ea({...ee,fecha_emision:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Fecha Vencimiento"}),(0,a.jsx)("input",{type:"date",value:ee.fecha_vencimiento,onChange:e=>ea({...ee,fecha_vencimiento:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-3",children:[(0,a.jsx)(s.Button,{type:"button",variant:"secondary",size:"sm",onClick:()=>D(!1),children:"Cancelar"}),(0,a.jsx)(s.Button,{type:"submit",size:"sm",children:M?"Actualizar":"Crear"})]})]})}),(0,a.jsx)(l.ConfirmModal,{isOpen:T,onClose:()=>O(!1),onConfirm:ew,title:"¿Eliminar factura?",message:"Esta acción no se puede deshacer.",isLoading:W})]})})}e.s(["default",()=>j])}]);