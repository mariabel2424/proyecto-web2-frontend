(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32959,e=>{"use strict";var t=e.i(96564),a=e.i(55528);e.s(["asistenciasService",0,{async getAsistencias(e,r){let{data:s}=await t.apiClient.get(`${a.API_ENDPOINTS.gruposCurso}/${e}/asistencias`,r?{fecha:r}:{});return s},async registrarAsistencias(e,r,s){let{data:i}=await t.apiClient.post(`${a.API_ENDPOINTS.gruposCurso}/${e}/asistencias`,{fecha:r,asistencias:s});return i},async getHistorial(e,r,s){let i={};r&&(i.fecha_inicio=r),s&&(i.fecha_fin=s);let{data:n}=await t.apiClient.get(`${a.API_ENDPOINTS.gruposCurso}/${e}/asistencias/historial`,i);return n},async getReporte(e,r){let{data:s}=await t.apiClient.get(`${a.API_ENDPOINTS.gruposCurso}/${e}/asistencias/reporte`,{fecha:r});return s}},"cursosService",0,{async getAll(e){let{data:r}=await t.apiClient.get(a.API_ENDPOINTS.cursos,e);if(r&&"object"==typeof r&&"success"in r&&r.data){let e=r.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return r&&"object"==typeof r&&"current_page"in r&&"data"in r?{data:Array.isArray(r.data)?r.data:[],total:r.total||0,current_page:r.current_page||1,last_page:r.last_page||1,per_page:r.per_page||15,from:r.from||0,to:r.to||0}:Array.isArray(r)?{data:r,total:r.length,current_page:1,last_page:1,per_page:r.length,from:1,to:r.length}:{data:[],total:0,current_page:1,last_page:1,per_page:15,from:0,to:0}},async getById(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.cursos}/${e}`);return r},async create(e){let{data:r}=await t.apiClient.post(a.API_ENDPOINTS.cursos,e);return r},async update(e,r){let{data:s}=await t.apiClient.put(`${a.API_ENDPOINTS.cursos}/${e}`,r);return s},async delete(e){await t.apiClient.delete(`${a.API_ENDPOINTS.cursos}/${e}`)},async getCursosAbiertos(){let{data:e}=await t.apiClient.get(a.API_ENDPOINTS.cursosAbiertos);return e},async getParticipantes(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.cursos}/${e}/participantes`);return r},async getGruposDisponibles(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.cursos}/${e}/grupos-disponibles`);return r},async getGruposPublico(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.cursos}/${e}/grupos-publico`);return r}},"gruposCursoService",0,{async getAll(e){let{data:r}=await t.apiClient.get(a.API_ENDPOINTS.gruposCurso,e);if(r&&"object"==typeof r&&"success"in r&&r.data){let e=r.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(r)?{data:r,total:r.length,current_page:1,last_page:1,per_page:r.length,from:1,to:r.length}:r},async getById(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.gruposCurso}/${e}`);return r},async create(e){let{data:r}=await t.apiClient.post(a.API_ENDPOINTS.gruposCurso,e);return r},async update(e,r){let{data:s}=await t.apiClient.put(`${a.API_ENDPOINTS.gruposCurso}/${e}`,r);return s},async delete(e){await t.apiClient.delete(`${a.API_ENDPOINTS.gruposCurso}/${e}`)},async getDeportistas(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.gruposCurso}/${e}/deportistas`);return r},async asignarInstructor(e,r){let{data:s}=await t.apiClient.post(`${a.API_ENDPOINTS.gruposCurso}/${e}/asignar-instructor`,{id_instructor:r});return s},async quitarInstructor(e,r){let{data:s}=await t.apiClient.post(`${a.API_ENDPOINTS.gruposCurso}/${e}/quitar-instructor`,{id_instructor:r});return s},async getInstructores(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.gruposCurso}/${e}/instructores`);return r},async cambiarEstado(e,r){let{data:s}=await t.apiClient.patch(`${a.API_ENDPOINTS.gruposCurso}/${e}/cambiar-estado`,{estado:r});return s}},"inscripcionesService",0,{async getAll(e){let{data:r}=await t.apiClient.get(a.API_ENDPOINTS.inscripcionesCurso,e);if(r&&"object"==typeof r&&"success"in r&&r.data){let e=r.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(r)?{data:r,total:r.length,current_page:1,last_page:1,per_page:r.length,from:1,to:r.length}:r},async getById(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.inscripcionesCurso}/${e}`);return r},async create(e){let{data:r}=await t.apiClient.post(a.API_ENDPOINTS.inscripcionesCurso,e);return r},async update(e,r){let{data:s}=await t.apiClient.put(`${a.API_ENDPOINTS.inscripcionesCurso}/${e}`,r);return s},async delete(e){await t.apiClient.delete(`${a.API_ENDPOINTS.inscripcionesCurso}/${e}`)},async calificar(e,r,s){let{data:i}=await t.apiClient.post(`${a.API_ENDPOINTS.inscripcionesCurso}/${e}/calificar`,{calificacion:r,comentarios:s});return i},async cancelar(e,r){let{data:s}=await t.apiClient.patch(`${a.API_ENDPOINTS.inscripcionesCurso}/${e}/cancelar`,{motivo:r});return s},async generarFactura(e,r){let{data:s}=await t.apiClient.post(`${a.API_ENDPOINTS.inscripcionesCurso}/${e}/generar-factura`,{id_tutor:r});return s},async getMisInscripciones(e){let{data:a}=await t.apiClient.get("/mis-inscripciones",e);return Array.isArray(a)?{data:a,total:a.length,current_page:1,last_page:1,per_page:a.length,from:1,to:a.length}:a}}])},89782,e=>{"use strict";var t=e.i(30680);let a=t.forwardRef(function({title:e,titleId:a,...r},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});e.s(["MagnifyingGlassIcon",0,a],89782)},49547,e=>{"use strict";var t=e.i(96564),a=e.i(55528);e.s(["deportistasService",0,{async getAll(e){let{data:r}=await t.apiClient.get(a.API_ENDPOINTS.deportistas,e);if(r&&"object"==typeof r&&"success"in r&&r.data){let e=r.data;return Array.isArray(e)?{data:e,total:e.length,current_page:1,last_page:1,per_page:e.length,from:1,to:e.length}:e}return Array.isArray(r)?{data:r,total:r.length,current_page:1,last_page:1,per_page:r.length,from:1,to:r.length}:r},async getById(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.deportistas}/${e}`);return r},async create(e){let{data:r}=await t.apiClient.post(a.API_ENDPOINTS.deportistas,e);return r},async update(e,r){let{data:s}=await t.apiClient.put(`${a.API_ENDPOINTS.deportistas}/${e}`,r);return s},async delete(e){await t.apiClient.delete(`${a.API_ENDPOINTS.deportistas}/${e}`)},async cambiarEstado(e,r){let{data:s}=await t.apiClient.post(`${a.API_ENDPOINTS.deportistas}/${e}/cambiar-estado`,{estado:r});return s},async restaurar(e){let{data:r}=await t.apiClient.post(`${a.API_ENDPOINTS.deportistas}/${e}/restaurar`);return r},async getEstadisticas(){let{data:e}=await t.apiClient.get(`${a.API_ENDPOINTS.deportistas}/estadisticas/generales`);return e},async getActivos(){let{data:e}=await t.apiClient.get(`${a.API_ENDPOINTS.deportistas}/activos/listar`);return e},async getByEstado(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.deportistas}/estado/${e}`);return r},async getByCategoria(e){let{data:r}=await t.apiClient.get(`${a.API_ENDPOINTS.deportistas}/categoria/${e}`);return r},async getMisParticipantes(){let{data:e}=await t.apiClient.get(a.API_ENDPOINTS.misParticipantes);return e&&"object"==typeof e&&"data"in e&&Array.isArray(e.data)?e.data:Array.isArray(e)?e:[]},async crearMiParticipante(e){let{data:r}=await t.apiClient.post(a.API_ENDPOINTS.misParticipantes,e);return r&&"object"==typeof r&&"data"in r?r.data:r},async actualizarMiParticipante(e,r){let{data:s}=await t.apiClient.put(`${a.API_ENDPOINTS.misParticipantes}/${e}`,r);return s&&"object"==typeof s&&"data"in s?s.data:s},async eliminarMiParticipante(e){await t.apiClient.delete(`${a.API_ENDPOINTS.misParticipantes}/${e}`)}}])},40629,e=>{"use strict";var t=e.i(30680);let a=t.forwardRef(function({title:e,titleId:a,...r},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});e.s(["XMarkIcon",0,a],40629)},75171,e=>{"use strict";var t=e.i(30680);let a=t.forwardRef(function({title:e,titleId:a,...r},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});e.s(["CheckCircleIcon",0,a],75171)},70563,e=>{"use strict";var t=e.i(30680);let a=t.forwardRef(function({title:e,titleId:a,...r},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});e.s(["PhotoIcon",0,a],70563)},20111,e=>{"use strict";var t=e.i(44472),a=e.i(30680),r=e.i(96833);e.i(51766);var s=e.i(5174);e.i(36106);var i=e.i(75650),n=e.i(75227),l=e.i(77993),o=e.i(55480),c=e.i(80028),d=e.i(99375),p=e.i(32959),u=e.i(49547),g=e.i(77554),m=e.i(75171),x=e.i(89782),h=e.i(40629),f=e.i(70563);let N=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))});var y=e.i(56146);let b=y.default.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME,j=y.default.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;async function v(e,t="comprobantes"){if(!b||!j)throw Error("Cloudinary no está configurado correctamente");let a=new FormData;a.append("file",e),a.append("upload_preset",j),a.append("folder",t);try{let e=await fetch(`https://api.cloudinary.com/v1_1/${b}/image/upload`,{method:"POST",body:a});if(!e.ok)throw Error("Error al subir la imagen");return await e.json()}catch(e){throw console.error("Error uploading to Cloudinary:",e),Error("No se pudo subir la imagen. Intenta nuevamente.")}}function P(){let e=(0,r.useRouter)(),y=(0,r.useSearchParams)(),[b,j]=(0,a.useState)("participante"),[P,C]=(0,a.useState)(!1),[w,I]=(0,a.useState)(!1),[_,A]=(0,a.useState)(""),[S,E]=(0,a.useState)(""),[$,D]=(0,a.useState)([]),[O,T]=(0,a.useState)([]),[k,B]=(0,a.useState)([]),[M,L]=(0,a.useState)(!1),[R,G]=(0,a.useState)(1),[U,F]=(0,a.useState)(""),[W,q]=(0,a.useState)(1),[V,X]=(0,a.useState)(null),[Z,J]=(0,a.useState)(null),[z,H]=(0,a.useState)(null),[K,Y]=(0,a.useState)({metodo_pago:"transferencia",referencia:"",observaciones:""}),[Q,ee]=(0,a.useState)(null),[et,ea]=(0,a.useState)(""),[er,es]=(0,a.useState)(!1),ei=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(e),en=e=>new Date(e).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}),el=e=>{if(!e)return"";let[t,a]=e.split(":"),r=parseInt(t);return`${r%12||12}:${a} ${r>=12?"PM":"AM"}`},eo=(0,a.useCallback)(async()=>{try{C(!0);let[e,t]=await Promise.all([u.deportistasService.getMisParticipantes(),p.cursosService.getCursosAbiertos()]);D(Array.isArray(e)?e:[]),T(t||[]);let a=y.get("curso");if(a){let e=parseInt(a);J(e);let t=await p.cursosService.getGruposPublico(e);B(t||[]);let r=y.get("grupo");r&&H(parseInt(r))}}catch{A("Error al cargar datos")}finally{C(!1)}},[y]);(0,a.useEffect)(()=>{eo()},[eo]);let ec=async e=>{J(e),H(null),q(1),L(!0);try{let t=await p.cursosService.getGruposPublico(e);B(t||[])}catch{B([])}finally{L(!1)}},ed=async()=>{if(!V||!Z||!z)return void A("Completa todos los campos");if(("transferencia"===K.metodo_pago||"efectivo"===K.metodo_pago)&&!Q)return void A("Debes subir un comprobante de pago");I(!0),A("");try{let e="";Q&&(es(!0),e=(await v(Q,"comprobantes")).secure_url,es(!1)),await p.inscripcionesService.create({id_curso:Z,id_grupo:z,id_deportista:V,generar_factura:!0,observaciones:`${K.observaciones||""} - M\xe9todo: ${K.metodo_pago} - Ref: ${K.referencia||"N/A"}${e?` - Comprobante: ${e}`:""}`}),E("¡Inscripción realizada! El administrador verificará tu pago."),j("confirmacion")}catch(e){A(e.message||"Error al inscribir")}finally{I(!1),es(!1)}},ep=O.filter(e=>e.nombre.toLowerCase().includes(U.toLowerCase())),eu=Math.ceil(ep.length/6),eg=ep.slice((R-1)*6,6*R),em=Math.ceil(k.length/4),ex=k.slice((W-1)*4,4*W),eh=$.find(e=>e.id_deportista===V),ef=O.find(e=>e.id_curso===Z),eN=k.find(e=>e.id_grupo===z);return(0,t.jsx)(s.DashboardLayout,{children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-50 rounded-lg",children:(0,t.jsx)(g.AcademicCapIcon,{className:"h-5 w-5 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-semibold",children:"Inscribir en Curso"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Inscribe a tu hijo en un curso vacacional"})]})]}),_&&(0,t.jsx)(l.Alert,{variant:"error",onClose:()=>A(""),children:_}),S&&(0,t.jsx)(l.Alert,{variant:"success",onClose:()=>E(""),children:S}),(0,t.jsx)("div",{className:"flex items-center justify-between px-2",children:["participante","curso","pago","confirmacion"].map((e,a)=>{let r=e===b,s="participante"===e&&V||"curso"===e&&z||"pago"===e&&"confirmacion"===b;return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${r?"bg-green-600 text-white":s?"bg-green-500 text-white":"bg-gray-200"}`,children:s&&!r?(0,t.jsx)(m.CheckCircleIcon,{className:"h-5 w-5"}):a+1}),(0,t.jsx)("span",{className:`ml-2 text-sm ${r?"text-green-600 font-medium":"text-gray-500"}`,children:["Participante","Curso","Pago","Confirmación"][a]}),a<3&&(0,t.jsx)("div",{className:"w-8 h-0.5 mx-2 bg-gray-200"})]},e)})}),(0,t.jsxs)(i.Card,{className:"p-6",children:["participante"===b&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"font-medium",children:"¿A quién deseas inscribir?"}),(0,t.jsx)("div",{className:"space-y-2",children:$.map(e=>(0,t.jsx)("button",{onClick:()=>X(e.id_deportista),className:`w-full p-4 text-left border rounded-lg ${V===e.id_deportista?"border-green-600 bg-green-50":"border-gray-200 hover:border-green-300"}`,children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:[e.nombres," ",e.apellidos]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.categoria?.nombre||"Sin categoría"})]}),V===e.id_deportista&&(0,t.jsx)(m.CheckCircleIcon,{className:"h-6 w-6 text-green-600"})]})},e.id_deportista))}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)(n.Button,{onClick:()=>j("curso"),disabled:!V,children:"Continuar"})})]}),"curso"===b&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Selecciona el curso y horario"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.MagnifyingGlassIcon,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar curso...",value:U,onChange:e=>{F(e.target.value),G(1)},className:"w-full pl-10 pr-10 py-2.5 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),U&&(0,t.jsx)("button",{onClick:()=>F(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,t.jsx)(h.XMarkIcon,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),P?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(o.Spinner,{})}):0===eg.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:U?"No se encontraron cursos con ese nombre":"No hay cursos disponibles"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-2",children:eg.map(e=>(0,t.jsx)("button",{onClick:()=>ec(e.id_curso),className:`w-full p-4 text-left border rounded-lg transition-all ${Z===e.id_curso?"border-green-600 bg-green-50 shadow-sm":"border-gray-200 hover:border-green-300 hover:shadow-sm"}`,children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium",children:e.nombre}),(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${"vacacional"===e.tipo?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:e.tipo})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[en(e.fecha_inicio)," -"," ",en(e.fecha_fin)]}),e.descripcion&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.descripcion})]}),(0,t.jsxs)("div",{className:"text-right ml-4",children:[(0,t.jsx)("p",{className:"font-semibold text-green-600 text-lg",children:ei(e.precio||0)}),Z===e.id_curso&&(0,t.jsx)(m.CheckCircleIcon,{className:"h-6 w-6 text-green-600 mt-1 ml-auto"})]})]})},e.id_curso))}),eu>1&&(0,t.jsx)("div",{className:"flex justify-center pt-2",children:(0,t.jsx)(d.Pagination,{page:R,lastPage:eu,total:ep.length,perPage:6,onPageChange:G})})]}),Z&&(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Selecciona el horario"}),M?(0,t.jsx)("div",{className:"flex justify-center py-4",children:(0,t.jsx)(o.Spinner,{})}):0===k.length?(0,t.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No hay horarios disponibles para este curso"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-2",children:ex.map(e=>{let a=e.cupo_maximo-(e.cupo_actual||0),r=a<=0;return(0,t.jsx)("button",{onClick:()=>!r&&H(e.id_grupo),disabled:r,className:`w-full p-3 text-left border rounded-lg transition-all ${r?"opacity-50 cursor-not-allowed bg-gray-50":z===e.id_grupo?"border-green-600 bg-green-50":"border-gray-200 hover:border-green-300"}`,children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.nombre}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[el(e.hora_inicio||"")," -"," ",el(e.hora_fin||"")," |"," ",(e=>{if(!e)return"Por definir";let t=[];if("string"==typeof e)try{t=JSON.parse(e)}catch{t=e.split(",").map(e=>e.trim())}else{if(!Array.isArray(e))return"Por definir";t=e}if(!t.length)return"Por definir";let a={0:"Dom",1:"Lun",2:"Mar",3:"Mié",4:"Jue",5:"Vie",6:"Sáb"};return t.map(e=>a[String(e)]||String(e)).join(", ")})(e.dias_semana)]}),e.instructor&&(0,t.jsxs)("p",{className:"text-xs text-gray-600 mt-0.5",children:["Instructor: ",e.instructor.nombre," ",e.instructor.apellido]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded font-medium ${r?"bg-red-100 text-red-700":a<=5?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:r?"Lleno":`${a} cupos`}),z===e.id_grupo&&(0,t.jsx)(m.CheckCircleIcon,{className:"h-5 w-5 text-green-600"})]})]})},e.id_grupo)})}),em>1&&(0,t.jsx)("div",{className:"flex justify-center pt-2",children:(0,t.jsx)(d.Pagination,{page:W,lastPage:em,total:k.length,perPage:4,onPageChange:q})})]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,t.jsx)(n.Button,{variant:"secondary",onClick:()=>j("participante"),children:"Atrás"}),(0,t.jsx)(n.Button,{onClick:()=>j("pago"),disabled:!z,children:"Continuar"})]})]}),"pago"===b&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Información de Pago"}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Participante:"}),(0,t.jsxs)("span",{className:"font-medium",children:[eh?.nombres," ",eh?.apellidos]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Curso:"}),(0,t.jsx)("span",{className:"font-medium",children:ef?.nombre})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Horario:"}),(0,t.jsx)("span",{className:"font-medium",children:eN?.nombre})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-2 border-t",children:[(0,t.jsx)("span",{className:"font-medium",children:"Total:"}),(0,t.jsx)("span",{className:"text-lg font-bold text-green-600",children:ei(ef?.precio||0)})]})]}),(0,t.jsx)(c.Select,{label:"Método de pago",value:K.metodo_pago,onChange:e=>{Y({...K,metodo_pago:e.target.value}),"tarjeta"===e.target.value&&(ee(null),ea(""))},options:[{value:"transferencia",label:"Transferencia Bancaria"},{value:"efectivo",label:"Efectivo"}]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Referencia de pago"," ","transferencia"===K.metodo_pago&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:K.referencia,onChange:e=>Y({...K,referencia:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"transferencia"===K.metodo_pago?"Número de referencia de la transferencia":"Número de recibo (opcional)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Comprobante de pago ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),et?(0,t.jsxs)("div",{className:"relative border rounded-lg overflow-hidden",children:[(0,t.jsx)("img",{src:et,alt:"Comprobante",className:"w-full h-48 object-contain bg-gray-50"}),(0,t.jsx)("button",{onClick:()=>{ee(null),ea("")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:(0,t.jsx)(h.XMarkIcon,{className:"h-5 w-5"})}),(0,t.jsx)("div",{className:"p-2 bg-gray-50 border-t",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(f.PhotoIcon,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"truncate",children:Q?.name})]})})]}):(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-400 transition-colors",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(!t)return;let a=["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type)?t.size>5242880?{valid:!1,error:"La imagen no debe superar 5MB"}:{valid:!0}:{valid:!1,error:"Solo se permiten imágenes (JPG, PNG, WEBP)"};if(!a.valid)return void A(a.error||"Archivo inválido");ee(t);let r=new FileReader;r.onloadend=()=>{ea(r.result)},r.readAsDataURL(t)},className:"hidden",id:"comprobante-upload"}),(0,t.jsxs)("label",{htmlFor:"comprobante-upload",className:"cursor-pointer flex flex-col items-center",children:[(0,t.jsx)(N,{className:"h-12 w-12 text-gray-400 mb-2"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Subir comprobante"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG o WEBP (máx. 5MB)"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Observaciones (opcional)"}),(0,t.jsx)("textarea",{value:K.observaciones,onChange:e=>Y({...K,observaciones:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"Información adicional sobre el pago..."})]}),(0,t.jsxs)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-800",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"⚠️ Importante:"}),(0,t.jsx)("p",{children:"Tu inscripción quedará pendiente hasta que el administrador verifique el comprobante de pago. Recibirás una notificación cuando sea aprobada."})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,t.jsx)(n.Button,{variant:"secondary",onClick:()=>j("curso"),children:"Atrás"}),(0,t.jsx)(n.Button,{onClick:ed,isLoading:w||er,disabled:!Q,children:er?"Subiendo comprobante...":"Confirmar Inscripción"})]})]}),"confirmacion"===b&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(m.CheckCircleIcon,{className:"h-10 w-10 text-green-600"})}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-2",children:"¡Inscripción Registrada!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"El administrador verificará tu pago y recibirás confirmación."}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg text-left text-sm mb-6 max-w-sm mx-auto",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Participante:"})," ",eh?.nombres," ",eh?.apellidos]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Curso:"})," ",ef?.nombre]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Grupo:"})," ",eN?.nombre]})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,t.jsx)(n.Button,{variant:"secondary",onClick:()=>e.push("/mis-participantes"),children:"Ver Participantes"}),(0,t.jsx)(n.Button,{onClick:()=>e.push("/dashboard"),children:"Ir al Dashboard"})]})]})]})]})})}function C(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(s.DashboardLayout,{children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)(o.Spinner,{})})}),children:(0,t.jsx)(P,{})})}e.s(["default",()=>C],20111)}]);